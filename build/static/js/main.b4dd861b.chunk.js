(this.webpackJsonpmake_site_frontend=this.webpackJsonpmake_site_frontend||[]).push([[0],{176:function(e,t,a){e.exports=a(452)},181:function(e,t,a){},452:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),s=a.n(i),o=(a(181),a(2)),c=a(3),l=a(5),d=a(4),u=a(6),m=a(454),g=a(455),p=a(456),h=a(14),E=a(453),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{className:"featured-page",to:"".concat("/sites","/p/").concat(this.props.data.url)},r.a.createElement("div",{className:"featured-page-title"},this.props.data.title),r.a.createElement("div",{className:"featured-page-author"},"By: ",this.props.data.author))}}]),t}(r.a.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.pages.length;t++)e.push(r.a.createElement(S,{data:this.props.pages[t],key:t}));return r.a.createElement("div",{className:"featured-pages"},r.a.createElement("div",{className:"featured-pages-title"},"Featured Pages"),r.a.createElement("div",{className:"featured-pages-links"},e))}}]),t}(r.a.Component),f="ALERT_SUCCESS",v="ALERT_ERROR",O="ALERT_CLEAR",T="GETFEATUREDSITES_REQUEST",y="GETFEATUREDSITES_SUCCESS",C="GETFEATUREDSITES_FAILURE",N="GETALLSITES_REQUEST",j="GETALLSITES_SUCCESS",k="GETALLSITES_FAILURE",U={NEWCOMMENT_REQUEST:"NEWCOMMENT_REQUEST",NEWCOMMENT_SUCCESS:"NEWCOMMENT_SUCCESS",NEWCOMMENT_FAILURE:"NEWCOMMENT_FAILURE",GETCOMMENTS_REQUEST:"GETCOMMENTS_REQUEST",GETCOMMENTS_SUCCESS:"GETCOMMENTS_SUCCESS",GETCOMMENTS_FAILURE:"GETCOMMENTS_FAILURE",DELETECOMMENT_REQUEST:"DELETECOMMENT_REQUEST",DELETECOMMENT_SUCCESS:"DELETECOMMENT_SUCCESS",DELETECOMMENT_FAILURE:"DELETECOMMENT_FAILURE"},R="GETPAGES_REQUEST",L="GETPAGES_SUCCESS",w="GETPAGES_FAILURE",I="NEWPAGE_REQUEST",A="NEWPAGE_SUCCESS",_="NEWPAGE_FAILURE",M="DELETEPAGE_REQUEST",P="DELETEPAGE_SUCCESS",D="DELETEPAGE_FAILURE",x="TOGGLE_ADD_PAGE_MODAL",G="TOGGLE_DELETE_PAGE_MODAL",F={ADDSECTION_REQUEST:"ADDSECTION_REQUEST",ADDSECTION_SUCCESS:"ADDSECTION_SUCCESS",ADDSECTION_FAILURE:"ADDSECTION_FAILURE",ADDIMAGESECTION_REQUEST:"ADDIMAGESECTION_REQUEST",ADDIMAGESECTION_SUCCESS:"ADDIMAGESECTION_SUCCESS",ADDIMAGESECTION_FAILURE:"ADDIMAGESECTION_FAILURE",DELETESECTION_REQUEST:"DELETESECTION_REQUEST",DELETSECTION_SUCCESS:"DELETESECTION_SUCCESS",DELETESECTION_FAILURE:"DELETESECTION_FAILURE",EDITORSITE_CHANGE:"EDITORSTATE_CHANGE",UPDATEVIEWARRAY:"UDPATEVIEWARRAY",EDITSECTION_REQUEST:"EDITSECTION_REQUEST",EDITSECTION_SUCCESS:"EDITSECTION_SUCCESS",EDITSECTION_FAILURE:"EDITSECTION_FAILURE",GETSTYLE_REQUEST:"GETSTYLE_REQUEST",GETSTYLE_SUCCESS:"GETSTYLE_SUCCESS",GETSTYLE_FAILURE:"GETSTYLE_FAILURE",GETTITLE_REQUEST:"GETTITLE_REQUEST",GETTITLE_SUCCESS:"GETTITLE_SUCCESS",GETTITLE_FAILURE:"GETTITLE_FAILURE",UPDATESTYLE:"UPDATESTYLE"},B={REGISTER_REQUEST:"USERS_REGISTER_REQUEST",REGISTER_SUCCESS:"USERS_REGISTER_SUCCESS",REGISTER_FAILURE:"USERS_REGISTER_FAILURE",LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT_REQUEST",LOGOUT_SUCCESS:"USERS_LOGOUT_SUCCESS",LOGOUT_FAILURE:"USERS_LOGOUT_FAILURE",GETALL_REQUEST:"USERS_GETALL_REQUEST",GETALL_SUCCESS:"USERS_GETALL_SUCCESS",GETALL_FAILURE:"USERS_GETALL_FAILURE"},Q=a(71),V=Object(Q.a)(),Y=a(41),J=a(170),W={type:"",message:""};var q=JSON.parse(localStorage.getItem("abdelrazaqCmsUser")),z=q?{loggedIn:!0,user:q}:{};var X=a(8);var H={showAddPageModal:!1,showDeletePageModal:!1};var $={viewArr:[]};var K=a(175);var Z=Object(Y.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{type:"alert-success",message:t.message};case v:return{type:"alert-danger",message:t.message};case O:return{initialState:W};default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case B.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user};case B.LOGIN_FAILURE:case B.LOGOUT:return{};default:return e}},browseSite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(X.a)({},e,{loading:!0});case y:return Object(X.a)({},e,{featuredSites:t.pages,loading:!1});case C:return Object(X.a)({},e,{error:t.error});case N:return Object(X.a)({},e,{loading:!0});case j:return Object(X.a)({},e,{allSites:t.pages,loading:!1});case k:return Object(X.a)({},e,{error:t.error});default:return e}},comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.NEWCOMMENT_REQUEST:return Object(X.a)({},e,{loading:!0});case U.NEWCOMMENT_SUCCESS:return Object(X.a)({},e,{comments:t.newCommentData,loading:!1});case U.NEWCOMMENT_FAILURE:return Object(X.a)({},e,{error:t.error});case U.GETCOMMENTS_REQUEST:return Object(X.a)({},e,{loading:!0});case U.GETCOMMENTS_SUCCESS:return Object(X.a)({},e,{comments:t.comments.comments,loading:!1});case U.GETCOMMENTS_FAILURE:return Object(X.a)({},e,{error:t.error});case U.DELETECOMMENT_REQUEST:return Object(X.a)({},e,{loading:!0});case U.DELETECOMMENT_SUCCESS:return Object(X.a)({},e,{comments:t.comments,loading:!1});case U.DELETECOMMENT_FAILURE:return Object(X.a)({},e,{error:t.error});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(X.a)({},e,{loading:!0});case L:return Object(X.a)({},e,{items:t.pageData});case w:return Object(X.a)({},e,{error:t.error});case I:return Object(X.a)({},e,{loading:!0});case A:return Object(X.a)({},e,{items:t.pageData,showAddPageModal:!1});case _:return Object(X.a)({},e,{error:t.error});case M:return Object(X.a)({},e,{loading:!0});case P:return console.log(t),Object(X.a)({},e,{loading:!1,items:t.pageData,showDeletePageModal:!1});case D:return Object(X.a)({},e,{error:t.error});case x:return Object(X.a)({},e,{showAddPageModal:!e.showAddPageModal});case G:return Object(X.a)({},e,{showDeletePageModal:!e.showDeletePageModal});default:return e}},editSite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.EDITORSTATE_CHANGE:var a=g;return a[t.index]=t.editorState,Object(X.a)({},e,{viewArr:a});case F.ADDSECTION_REQUEST:var n={getStyle:JSON.stringify(t.style)};return Object(X.a)({},e,{results:n});case F.ADDIMAGESECTION_REQUEST:return Object(X.a)({},e,{loading:!0});case F.ADDIMAGESECTION_SUCCESS:var r=t.sectionData.body;console.log(r);var i={getStyle:r},s={success:!0,results:i};return Object(X.a)({},e,{style:s});case F.ADDSECTION_SUCCESS:console.log("added section");var o={getStyle:t.sectionData.body},c={success:!0,results:o};return console.log(c),Object(X.a)({},e,{style:c});case F.ADDSECTION_FAILURE:return Object(X.a)({},e);case F.UPDATEVIEWARRAY:return(a=e.viewArr)[t.index]=t.view,Object(X.a)({},e,{viewArr:a});case F.EDITSECTION_REQUEST:return Object(X.a)({},e);case F.EDITSECTION_SUCCESS:var l={getStyle:JSON.stringify(t.editData)};console.log(l);var d={success:!0,results:l};return console.log(d),Object(X.a)({},e,{style:d});case F.EDITSECTION_FAILURE:return Object(X.a)({},e);case F.GETSTYLE_REQUEST:return Object(X.a)({},e,{loading:!0});case F.GETSTYLE_SUCCESS:t.style.results.getStyle=t.style.results.getStyle.replace(/\n/g,"");for(var u=JSON.parse(t.style.results.getStyle),m=u.sections,g=[],p=0;p<m.length;p++)g.push("view");return Object(X.a)({},e,{style:t.style,loading:!1,viewArr:g});case F.GETSTYLE_FAILURE:return{};case F.GETTITLE_REQUEST:return console.log("ge title request"),Object(X.a)({},e,{loading:!0});case F.GETTITLE_SUCCESS:return Object(X.a)({},e,{title:t.title,loading:!1});case F.GETTITLE_FAILURE:return Object(X.a)({},e);case F.UPDATESTYLE:return Object(X.a)({},e,{style:t.style});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.REGISTER_REQUEST:return{registering:!0};case B.REGISTER_SUCCESS:case B.REGISTER_FAILURE:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.GETALL_REQUEST:return{loading:!0};case B.GETALL_SUCCESS:return{items:t.users};case B.GETALL_FAILURE:return{error:t.error};case B.DELETE_REQUEST:return Object(X.a)({},e,{items:e.items.map((function(e){return e.id===t.id?Object(X.a)({},e,{deleting:!0}):e}))});case B.DELETE_SUCCESS:return{items:e.items.filter((function(e){return e.id!==t.id}))};case B.DELETE_FAILURE:return Object(X.a)({},e,{items:e.items.map((function(e){if(e.id===t.id){e.deleting;var a=Object(K.a)(e,["deleting"]);return Object(X.a)({},a,{deleteError:t.error})}return e}))});default:return e}}}),ee=Object(Y.d)(Z,Object(Y.a)(J.a));function te(){var e=JSON.parse(localStorage.getItem("abdelrazaqCmsUser"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var ae={getFeaturedPages:function(){var e={method:"GET",headers:te()};return fetch("/cms-api/get-featured-pages",e).then(ne).then((function(e){return console.log(e),e}))},getAllPages:function(){var e={method:"GET",headers:te()};return fetch("/cms-api/get-all-pages",e).then(ne).then((function(e){return console.log(e),e}))}};function ne(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){console.log("sucess is false");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}console.log("error error"),401===e.status&&console.log("weird response");var r=a&&a.message||e.statusText;return Promise.reject(r)}))}var re={newComment:function(e){console.log(window);var t,a=window.location.pathname;0;t=a.slice(9),console.log(t);var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/cms-api/new-comment/"+t,n).then(ie).then((function(e){return e.comments}))},getComments:function(e){var t={method:"GET",headers:te()};return console.log("get da comments"),fetch("/cms-api/get-comments/"+e,t).then(ie).then((function(e){return e}))},deleteComment:function(e){var t={method:"GET",headers:te()};return fetch("/cms-api/delete-comment/"+e,t).then(ie).then((function(e){return console.log(e),e}))}};function ie(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}e.status;var r=a&&a.message||e.statusText;return Promise.reject(r)}))}var se={newPage:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/cms-api/new-page",t).then(oe).then((function(e){return console.log(e),e}))},getPages:function(){var e={method:"GET",headers:te()};return fetch("/cms-api/get-my-pages",e).then(oe).then((function(e){return e}))},deletePage:function(e){console.log("delete page in service");var t={method:"GET",headers:te()};return fetch("/cms-api/delete-page/"+e,t).then(oe).then((function(e){return console.log(e),e}))}};function oe(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){console.log("sucess is false");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}console.log("error error"),401===e.status&&console.log("weird response");var r=a&&a.message||e.statusText;return Promise.reject(r)}))}var ce={addSection:le,addImageSection:function(e,t,a,n){if(void 0===n)return;var r=new FormData;return r.append("name",t),r.append("style",JSON.stringify(n)),r.append("image",a),le(e,r,"image"),fetch("/cms-api/add-image-section/"+e,{method:"POST",body:r}).then(de).then((function(e){return e}))},editSection:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("/cms-api/edit-section/"+e,a).then(de).then((function(e){return e}))},getStyle:function(e){var t={method:"GET",headers:te()};return fetch("/cms-api/get-style/"+e,t).then(de).then((function(e){return e}))},getTitle:function(e){var t={method:"GET",headers:te()};return fetch("/cms-api/get-title/"+e,t).then(de).then((function(e){return e}))}};function le(e,t,a){if("image"!==a){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("/cms-api/add-section/"+e,n).then(de).then((function(e){return e}))}}function de(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}e.status;var r=a&&a.message||e.statusText;return Promise.reject(r)}))}var ue={login:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/cms-api/user-login",t).then(ge).then((function(e){return localStorage.setItem("abdelrazaqCmsUser",JSON.stringify(e)),e}))},logout:me,register:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e,t)};return fetch("/cms-api/register",a).then(ge)},getAll:function(){var e={method:"GET",headers:te()};return fetch("/cms-api/get-users",e).then(ge)},getById:function(e){var t={method:"GET",headers:te()};return fetch("/cms-api/get-user/".concat(e),t).then(ge)},update:function(e){var t={method:"PUT",headers:Object(X.a)({},te(),{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("/cms-api/users/".concat(e.id),t).then(ge)}};function me(){localStorage.removeItem("abdelrazaqCmsUser")}function ge(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(console.log(a),e.ok){if(!1===a.success){console.log("sucess is false");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}401===e.status&&me();var r=a&&a.message||e.statusText;return Promise.reject(r)}))}var pe={login:function(e){return function(t){t({type:B.LOGIN_REQUEST,user:{loginData:e}}),ue.login(e).then((function(a){t(function(e){return{type:B.LOGIN_SUCCESS,user:e}}(e)),V.push("".concat("/sites","/dashboard"))}),(function(e){t(function(e){return{type:B.LOGIN_FAILURE,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},logout:function(){return ue.logout(),{type:B.LOGOUT}},register:function(e){return function(t){console.log("before calling dispatch request"),t(function(e){return{type:B.REGISTER_REQUEST,user:e}}(e)),console.log("after calling dispatch request"),ue.register(e).then((function(e){t(function(e){return{type:B.REGISTER_SUCCESS,user:e}}()),V.push("".concat("/sites","/login")),t(ve.success("Succesfully registered"))}),(function(e){console.log("failure"),t(function(e){return{type:B.REGISTER_FAILURE,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},getAll:function(){return function(e){e({type:B.GETALL_REQUEST}),ue.getAll().then((function(t){return e(function(e){return{type:B.GETALL_SUCCESS,users:e}}(t))}),(function(t){return e(function(e){return{type:B.GETALL_FAILURE,error:e}}(t.toString()))}))}}};var he={getFeaturedPages:function(){return function(e){e({type:T}),ae.getFeaturedPages().then((function(t){e(function(e){return{type:y,pages:e.pages}}(t))}),(function(t){e(function(e){return{type:C,error:e}}(t.toString())),e(ve.error(t.toString()))}))}},getAllPages:function(){return function(e){e({type:N}),ae.getAllPages().then((function(t){e(function(e){return{type:j,pages:e.pages}}(t))}),(function(t){e(function(e){return{type:k,error:e}}(t.toString())),e(ve.error(t.toString()))}))}}};var Ee={newComment:function(e){return function(t){t({type:U.NEWCOMMENT_REQUEST}),re.newComment(e).then((function(e){t(function(e){return{type:U.NEWCOMMENT_SUCCESS,newCommentData:e}}(e)),t(ve.success("Comment succesfully commented."))}),(function(e){t(function(e){return{type:U.NEWCOMMENT_FAILURE,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},getComments:function(e){return function(t){t({type:U.GETCOMMENTS_REQUEST}),re.getComments(e).then((function(e){t(function(e){return{type:U.GETCOMMENTS_SUCCESS,comments:e}}(e))}),(function(e){t(function(e){return{type:U.GETCOMMENTS_FAILURE,error:e}}(e.toString()))}))}},deleteComments:function(e){return function(t){t({type:U.DELETECONTENT_REQUEST}),re.deleteComments(e).then((function(e){t({type:U.DELETECONTENT_SUCCESS})}),(function(e){t((e.toString(),{type:U.DELETECONTENT_FAILURE}))}))}}};var Se={newPage:function(e){return function(t){t({type:I}),se.newPage(e).then((function(e){t(function(e){return{type:A,pageData:e.pages}}(e)),t(ve.success("New page succesfully added.")),console.log("ok now push to history"),be()}),(function(e){t(function(e){return{type:_,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},getPages:be,deletePage:function(e){return console.log("delete page"),function(t){t({type:M}),se.deletePage(e).then((function(e){console.log(e),t(function(e){return console.log(e),{type:P,pageData:e.pages}}(e)),t(ve.success("Page succesfully deleted.")),console.log("ok now push to history"),be()}),(function(e){console.log(e),t(function(e){return{type:D,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},toggleAddPageModal:function(){return function(e){e(ve.success("")),e({type:x})}},toggleDeletePageModal:function(){return function(e){e(ve.success("")),e({type:G})}}};function be(){return function(e){e({type:R}),se.getPages().then((function(t){e({type:L,pageData:t.results.getPages})}),(function(t){console.log("error occuring here"),e(function(e){return{type:w,error:e}}(t.toString())),e(ve.error(t.toString()))}))}}var fe={addSection:function(e,t){return function(a){a(function(e,t){return{type:F.ADDSECTION_REQUEST,siteURL:e,style:t}}(e,t)),ce.addSection(e,t).then((function(e){a({type:F.ADDSECTION_SUCCESS,sectionData:e})}),(function(e){a(function(e){return{type:F.ADDSECTION_FAILURE,error:e}}(e.toString())),a(ve.error(e.toString()))}))}},addImageSection:function(e,t,a,n){return function(r){r(function(e,t,a,n){return{type:F.ADDIMAGESECTION_REQUEST,siteURL:e,hash:t,image:a,style:n}}(e,t,a,n)),ce.addImageSection(e,t,a,n).then((function(e){r({type:F.ADDIMAGESECTION_SUCCESS,sectionData:e})}),(function(e){r(function(e){return{type:F.ADDIMAGESECTION_FAILURE,error:e}}(e.toString())),r(ve.error(e.toString()))}))}},deleteSection:function(e,t){return function(a){a(function(e,t){return{type:F.DELETSECTION_REQUEST,siteURL:e,sectionIndex:t}}(e,t)),ce.deleteSection(e,t).then((function(e){var t;a({type:F.DELETESECTION_SUCCESS,sectionData:t})}),(function(e){a(function(e){return{type:F.DELETESECTION_FAILURE,error:e}}(e.toString())),a(ve.error(e.toString()))}))}},editSection:function(e,t){return function(a){a(function(e){return{type:F.EDITSECTION_REQUEST,editData:e}}(t)),ce.editSection(e,t).then((function(e){a(function(e){return{type:F.EDITSECTION_SUCCESS,editData:e}}(t))}),(function(e){a(function(e){return{type:F.EDITSECTION_FAILURE,error:e}}(e.toString())),a(ve.error(e.toString()))}))}},getStyle:function(e){return function(t){t({type:F.GETSTYLE_REQUEST}),ce.getStyle(e).then((function(e){t(function(e){return{type:F.GETSTYLE_SUCCESS,style:e}}(e))}),(function(e){t(function(e){return{type:F.GETSTYLE_FAILURE,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},getTitle:function(e){return function(t){t({type:F.GETTITLE_REQUEST}),ce.getTitle(e).then((function(e){t(function(e){return{type:F.GETTITLE_SUCCESS,title:e}}(e))}),(function(e){t(function(e){return{type:F.GETTITLE_FAILURE,error:e}}(e.toString())),t(ve.error(e.toString()))}))}},updateSiteBackground:function(e){return function(t){t(function(e){return{type:F.UPDATESTYLE,style:e}}(e))}},updateView:function(e,t){return function(a){a(function(e,t){return{type:F.UPDATEVIEWARRAY,view:e,index:t}}(e,t))}}};var ve={success:function(e){return{type:f,message:e}},error:function(e){return{type:v,message:e}},clear:function(){return{type:O}}};var Oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).props.getFeaturedPages(),a.props.getAllPages(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"browse-site"},r.a.createElement("div",{className:"browse-site-title"},"Browse the site"),this.props.featuredSites?r.a.createElement(b,{pages:this.props.featuredSites}):r.a.createElement("span",null,r.a.createElement("div",{className:"loading"}),r.a.createElement("span",null,"Loading Featured Pages...")))}}]),t}(r.a.Component);var Te=Object(h.b)((function(e){return e.browseSite.browseSite,console.log(e.browseSite),e.browseSite}),(function(e){return{getFeaturedPages:function(){e(he.getFeaturedPages())},getAllPages:function(){e(he.getAllPages())}}}))(Oe),ye=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"homepage"},r.a.createElement("div",{className:"homepage-title"},"Welcome to the page creator on abdelrazaq.com"),r.a.createElement("div",{className:"homepage-links"},r.a.createElement(E.a,{to:"".concat("/sites","/login"),className:"cms-btn"},"Login"),r.a.createElement(E.a,{to:"".concat("/sites","/register"),className:"cms-btn"},"Register")),r.a.createElement(Te,null))}}]),t}(r.a.Component),Ce=a(1),Ne=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).delete=e.delete.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"delete",value:function(){this.props.deleteClicked(this.props.url)}},{key:"render",value:function(e){return r.a.createElement("div",{className:"page"},r.a.createElement(E.a,{className:"page-btn",to:"".concat("/sites","/edit-site/").concat(this.props.url)},this.props.title),r.a.createElement("button",{className:"page-delete",onClick:this.delete},"Delete"))}}]),t}(r.a.Component),je=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.data.items)return r.a.createElement("div",{className:"loading"},"Loading...");if(this.props.data.items&&this.props.data.items){for(var e=this.props.data.items,t=[],a=0;a<e.length;a++){var n=e[a];t.push(r.a.createElement(Ne,{key:a,id:n.id,author:n.author,url:n.url,title:n.title,style:n.style,deleteClicked:this.props.onDelete}))}return t.length>0?r.a.createElement("div",{className:"pages"},t):r.a.createElement("div",{className:"pages"},'You haven\'t created any pages yet. Click "new page" below to create your first page!')}}}]),t}(r.a.Component),ke=a(25),Ue=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.message?(console.log(this.props.type),r.a.createElement("div",{className:"alert ".concat(this.props.type)},this.props.message)):null}}]),t}(r.a.Component);var Re=Object(h.b)((function(e){return e.alert}))(Ue),Le=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={pageTitle:"",pageURL:"",invalidURL:!1,isPrivate:!1,submitted:!1},e.handleChange=e.handleChange.bind(Object(Ce.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name,r=RegExp(/^([\w-]*)$/);if("pageURL"===n&&!r.test(a))return console.log("unacceptable"),void this.setState({invalidURL:!0});this.setState(Object(ke.a)({invalidURL:!1},n,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.pageTitle&&this.state.pageURL){this.setState({submitted:!0});var t=this.state;this.props.onSubmit(t)}}},{key:"render",value:function(){return r.a.createElement("form",{name:"form",className:"new-page-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pageTitle"},"Page Title"),r.a.createElement("input",{type:"text",name:"pageTitle",value:this.state.pageTitle,onChange:this.handleChange})),this.state.submitted&&!this.state.pageTitle&&r.a.createElement("div",{className:"help-block"},"Page title is required"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pageName"},"Page URL"),r.a.createElement("input",{type:"text",name:"pageURL",value:this.state.pageURL,onChange:this.handleChange})),this.state.submitted&&!this.state.pageURL&&r.a.createElement("div",{className:"help-block"},"Page URL is required"),this.state.invalidURL&&r.a.createElement("div",{className:"help-block"},"Only letters, numbers, dashes and underscores allowed."),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"page-name"},"Make private?"),r.a.createElement("input",{type:"checkbox",name:"isPrivate",checked:this.state.isPrivate,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"submit"},"Create Page"),this.props&&r.a.createElement("div",{className:"loading"})),r.a.createElement(Re,null))}}]),t}(r.a.Component),we=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"delete-page-modal"},r.a.createElement("div",{className:"confirm"},"Are you sure?"),r.a.createElement("div",{className:"delete-page-buttons"},r.a.createElement("button",{className:"submit",onClick:this.props.onDelete},"Yes"),r.a.createElement("button",{className:"submit",onClick:this.props.cancel},"No")))}}]),t}(r.a.Component),Ie=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"stopClose",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},{key:"render",value:function(){var e=this;return this.props.show?r.a.createElement("div",{className:"modal-backdrop",onClick:this.props.onClose},r.a.createElement("div",{className:"modal "+this.props.className,onClick:function(t){return e.stopClose(t)}},r.a.createElement("span",{className:"modal-close",onClick:this.props.onClose},"[ x ]"),r.a.createElement("div",{className:"modal-content"},this.props.children))):null}}]),t}(r.a.Component),Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={pageURLToDelete:"",showAddPageModal:e.dashboard.showAddPageModal,showDeletePageModal:e.dashboard.showDeletePageModal,pages:[]},a.getPages=a.getPages.bind(Object(Ce.a)(a)),a.addPage=a.addPage.bind(Object(Ce.a)(a)),a.deletePage=a.deletePage.bind(Object(Ce.a)(a)),a.toggleAddPageModal=a.toggleAddPageModal.bind(Object(Ce.a)(a)),a.toggleDeletePageModal=a.toggleDeletePageModal.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPages()}},{key:"getPages",value:function(){this.props.getPages()}},{key:"addPage",value:function(e){var t={url:e.pageURL,title:e.pageTitle,style:"",private:e.isPrivate};this.props.addPage(t)}},{key:"deletePage",value:function(){this.props.deletePage(this.state.pageURLToDelete)}},{key:"toggleAddPageModal",value:function(){this.props.toggleAddPageModal()}},{key:"toggleDeletePageModal",value:function(e){this.setState({pageURLToDelete:e}),this.props.toggleDeletePageModal()}},{key:"render",value:function(){return r.a.createElement("div",{className:"page dashboard-page"},r.a.createElement("div",{className:"page-header dashboard-header"},r.a.createElement("div",{className:"page-title dashboard-title"},"Your pages")),r.a.createElement(Re,null),r.a.createElement(je,{data:this.props.dashboard,onDelete:this.toggleDeletePageModal}),r.a.createElement("button",{className:"cms-btn add-page",onClick:this.toggleAddPageModal},"New page"),r.a.createElement(Ie,{show:this.props.dashboard.showAddPageModal,onClose:this.toggleAddPageModal},r.a.createElement(Le,{onSubmit:this.addPage})),r.a.createElement(Ie,{show:this.props.dashboard.showDeletePageModal,onClose:this.toggleDeletePageModal},r.a.createElement(we,{onDelete:this.deletePage,cancel:this.toggleDeletePageModal})))}}]),t}(r.a.Component);var _e=Object(h.b)((function(e){return{dashboard:e.dashboard}}),(function(e){return{getPages:function(){e(Se.getPages())},addPage:function(t){e(Se.newPage(t))},deletePage:function(t){e(Se.deletePage(t))},toggleAddPageModal:function(){e(Se.toggleAddPageModal())},toggleDeletePageModal:function(){e(Se.toggleDeletePageModal())}}}))(Ae),Me=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={username:"",password:"",validSubmission:!1,submitted:!1},e.handleChange=e.handleChange.bind(Object(Ce.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(ke.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=this.props.dispatch;if(t.username&&t.password){this.setState({validSubmission:!0});var n={username:t.username,password:t.password};a(pe.login(n))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"page login-page"},r.a.createElement("div",{className:"page-title login-title"},"Log in"),r.a.createElement(Re,null),r.a.createElement("form",{name:"form",className:"user-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,autocomplete:"off"})),this.state.submitted&&!this.state.username&&r.a.createElement("div",{className:"help-block"},"Username is required"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,autocomplete:"off"})),this.state.submitted&&!this.state.password&&r.a.createElement("div",{className:"help-block"},"Password is required"),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"submit"},"Log in")),this.state.submitted&&this.state.validSubmission&&r.a.createElement("div",{className:"loading"}),r.a.createElement(E.a,{to:"".concat("/sites","/register"),className:"btn btn-link"},"Don't have an account? Register here")))}}]),t}(r.a.Component);var Pe=Object(h.b)((function(e){return{registering:e.registration.registering}}))(Me),De=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={username:"",password:"",repeatedPassword:"",email:"",submitted:!1,validSubmission:!1},e.handleSubmit=e.handleSubmit.bind(Object(Ce.a)(e)),e.handleChange=e.handleChange.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=this.props.dispatch;if(t.username&&t.password&&t.password===t.repeatedPassword){this.setState({validSubmission:!0});var n={username:t.username,password:t.password,email:t.email};a(pe.register(n))}}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(ke.a)({},a,n))}},{key:"render",value:function(){var e=this.state.password!==this.state.repeatedPassword;return r.a.createElement("div",{className:"page register-page"},r.a.createElement("div",{className:"register-title"},"Sign up"),r.a.createElement(Re,null),r.a.createElement("form",{name:"form",className:"user-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,autocomplete:"off"})),this.state.submitted&&!this.state.username&&r.a.createElement("div",{className:"help-block"},"Username is required"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:e?"red-input":""})),this.state.submitted&&!this.state.password&&r.a.createElement("div",{className:"help-block"},"Password is required"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Repeat Password"),r.a.createElement("input",{type:"password",name:"repeatedPassword",value:this.state.repeatedPassword,onChange:this.handleChange,className:e?"red-input":""})),this.state.submitted&&!this.state.repeatedPassword&&r.a.createElement("div",{className:"help-block"},"Repeated password is required"),e&&this.state.submitted&&r.a.createElement("div",{className:"help-block"},"Passwords must be the same"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Email (not required, but can be used to reset your password)"),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"submit"},"Register"),this.submitted&&this.state.validSubmission&&r.a.createElement("div",{className:"loading"})),r.a.createElement(E.a,{to:"".concat("/sites","/login"),className:"btn btn-link"},"Already have an account? Log in!")))}}]),t}(r.a.Component);var xe=Object(h.b)((function(e){return{registering:e.registration.registering}}))(De),Ge=a(171),Fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={backgroundOpen:!1,marginsOpen:!1,paddingsOpen:!1,colorOpen:!1},a.toggleBackgroundOpen=a.toggleBackgroundOpen.bind(Object(Ce.a)(a)),a.toggleMarginsOpen=a.toggleMarginsOpen.bind(Object(Ce.a)(a)),a.togglePaddingsOpen=a.togglePaddingsOpen.bind(Object(Ce.a)(a)),a.toggleColorOpen=a.toggleColorOpen.bind(Object(Ce.a)(a)),a.updateMargin=a.updateMargin.bind(Object(Ce.a)(a)),a.updatePadding=a.updatePadding.bind(Object(Ce.a)(a)),a.updateBackgroundColor=a.updateBackgroundColor.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleBackgroundOpen",value:function(){this.setState({backgroundOpen:!this.state.backgroundOpen})}},{key:"toggleMarginsOpen",value:function(){this.setState({marginsOpen:!this.state.marginsOpen})}},{key:"togglePaddingsOpen",value:function(){this.setState({paddingsOpen:!this.state.paddingsOpen})}},{key:"toggleColorOpen",value:function(){console.log("toggle color"),this.setState({colorOpen:!this.state.colorOpen})}},{key:"updateMargin",value:function(e){this.props.style;var t=this.props.style.margin,a=parseInt(e.target.value);"marginTop"===e.target.name?t=[a,t[1],t[2],t[3]]:"marginRight"===e.target.name?t=[t[0],a,t[2],t[3]]:"marginBottom"===e.target.name?t=[t[0],t[1],a,t[3]]:"marginLeft"===e.target.name?t=[t[0],t[1],t[2],a]:console.log("youre fucked");var n=this.props.style;n.margin=t,this.props.updateBackground(n)}},{key:"updatePadding",value:function(e){this.props.style;for(var t=this.props.style.padding,a=0;a<t.length;a++)null===t[a]?(console.log("dis is nukk"),t[a]=0):console.log(t[a]);var n=parseInt(e.target.value);"paddingTop"===e.target.name?t=[n,t[1],t[2],t[3]]:"paddingRight"===e.target.name?t=[t[0],n,t[2],t[3]]:"paddingBottom"===e.target.name?t=[t[0],t[1],n,t[3]]:"paddingLeft"===e.target.name?t=[t[0],t[1],t[2],n]:console.log("youre fucked");var r=this.props.style;r.padding=t,this.props.updateBackground(r)}},{key:"updateBackgroundColor",value:function(e){var t=this.props.style;t.color=e.hex,this.props.updateBackground(t)}},{key:"postStyle",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"background-editor"},r.a.createElement("div",{className:"background-options-title",onClick:this.toggleBackgroundOpen},"Background",r.a.createElement("div",{className:this.state.backgroundOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.backgroundOpen?"background-editor-controls show":"background-editor-controls close"},r.a.createElement("div",{className:"margins-editor-title background-options-title",onClick:this.toggleMarginsOpen},"Margins",r.a.createElement("div",{className:this.state.marginsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.marginsOpen?"margin-controller-section open":"margin-controller-section close"},r.a.createElement("div",{className:"margin-controller margin-top-controller"},r.a.createElement("label",{htmlFor:"marginTop"},"Top Margin",r.a.createElement("input",{type:"number",name:"marginTop",min:"0",max:"100",value:this.props.style.margin[0],onChange:this.updateMargin}))),r.a.createElement("div",{className:"margin-controller margin-right-controller"},r.a.createElement("label",{htmlFor:"marginRight"},"Right Margin",r.a.createElement("input",{type:"number",name:"marginRight",min:"0",max:"100",value:this.props.style.margin[1],onChange:this.updateMargin}))),r.a.createElement("div",{className:"margin-controller margin-bottom-controller"},r.a.createElement("label",{htmlFor:"marginBottom"},"Bottom Margin",r.a.createElement("input",{type:"number",name:"marginBottom",min:"0",max:"100",value:this.props.style.margin[2],onChange:this.updateMargin}))),r.a.createElement("div",{className:"margin-controller margin-left-controller"},r.a.createElement("label",{htmlFor:"marginLeft"},"Left Margin",r.a.createElement("input",{type:"number",name:"marginLeft",min:"0",max:"100",value:this.props.style.margin[3],onChange:this.updateMargin})))),r.a.createElement("div",{className:"paddings-editor-title background-options-title",onClick:this.togglePaddingsOpen},"Paddings",r.a.createElement("div",{className:this.state.paddingsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.paddingsOpen?"padding-controller-section open":"padding-controller-section close"},r.a.createElement("div",{className:"margin-controller margin-top-controller"},r.a.createElement("label",{htmlFor:"paddingTop"},"Top Padding",r.a.createElement("input",{type:"number",name:"paddingTop",min:"0",max:"100",value:this.props.style.padding[0],onChange:this.updatePadding}))),r.a.createElement("div",{className:"margin-controller margin-right-controller"},r.a.createElement("label",{htmlFor:"paddingRight"},"Right Padding",r.a.createElement("input",{type:"number",name:"paddingRight",min:"0",max:"100",value:this.props.style.padding[1],onChange:this.updatePadding}))),r.a.createElement("div",{className:"margin-controller margin-bottom-controller"},r.a.createElement("label",{htmlFor:"paddingBottom"},"Bottom Padding",r.a.createElement("input",{type:"number",name:"paddingBottom",min:"0",max:"100",value:this.props.style.padding[2],onChange:this.updatePadding}))),r.a.createElement("div",{className:"margin-controller margin-left-controller"},r.a.createElement("label",{htmlFor:"paddingLeft"},"Left Padding",r.a.createElement("input",{type:"number",name:"paddingLeft",min:"0",max:"100",value:this.props.style.padding[3],onChange:this.updatePadding})))),r.a.createElement("div",{className:"color-editor-title background-options-title",onClick:this.toggleColorOpen},"Color",r.a.createElement("div",{className:this.state.colorOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.colorOpen?"color-controller-section open":"color-controller-section close"},r.a.createElement(Ge.CompactPicker,{color:this.props.style.color,onChangeComplete:this.updateBackgroundColor}))))}}]),t}(r.a.Component),Be=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={deleteModalOpen:!1},e.toggleDeleteModal=e.toggleDeleteModal.bind(Object(Ce.a)(e)),e.deleteSection=e.deleteSection.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleDeleteModal",value:function(){this.setState({deleteModalOpen:!this.state.deleteModalOpen})}},{key:"deleteSection",value:function(){var e=this.props.deleteSection(this.props.index);console.log(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"delete-section",onClick:this.toggleDeleteModal},"Delete Section",r.a.createElement(Ie,{show:this.state.deleteModalOpen,onClose:this.toggleDeleteModal},r.a.createElement("button",{className:"cms-btn",onClick:this.deleteSection},"Delete Section")))}}]),t}(r.a.Component),Qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={editSectionOpen:!1,marginsOpen:!1,paddingsOpen:!1},a.toggleEditSectionOpen=a.toggleEditSectionOpen.bind(Object(Ce.a)(a)),a.toggleMarginsOpen=a.toggleMarginsOpen.bind(Object(Ce.a)(a)),a.togglePaddingsOpen=a.togglePaddingsOpen.bind(Object(Ce.a)(a)),a.updateMargin=a.updateMargin.bind(Object(Ce.a)(a)),a.updatePadding=a.updatePadding.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleEditSectionOpen",value:function(){this.setState({editSectionOpen:!this.state.editSectionOpen})}},{key:"toggleMarginsOpen",value:function(){this.setState({marginsOpen:!this.state.marginsOpen})}},{key:"togglePaddingsOpen",value:function(){this.setState({paddingsOpen:!this.state.paddingsOpen})}},{key:"updateMargin",value:function(e){var t=this.props.sectionData.text[0].margin,a=parseInt(e.target.value);"marginTop"===e.target.name?t=[a,t[1],t[2],t[3]]:"marginRight"===e.target.name?t=[t[0],a,t[2],t[3]]:"marginBottom"===e.target.name?t=[t[0],t[1],a,t[3]]:"marginLeft"===e.target.name?t=[t[0],t[1],t[2],a]:console.log("youre fucked");var n=this.props.sectionData;n.text[0].margin=t,console.log(n),this.props.updateTextSection(this.props.index,n)}},{key:"updatePadding",value:function(e){}},{key:"render",value:function(){var e=this.props.sectionData.text[0].margin,t=this.props.sectionData.text[0].padding;return r.a.createElement("div",{className:"edit-tab-section"},r.a.createElement("div",{className:"edit-tab-section-title",onClick:this.toggleEditSectionOpen},"Type Section: ",this.props.sectionData.sectionType,r.a.createElement("div",{className:this.state.editSectionOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.editSectionOpen?"edit-tab-section-controls show":"edit-tab-section-controls close"},r.a.createElement("div",{className:"margins-editor-title background-options-title",onClick:this.toggleMarginsOpen},"Margins",r.a.createElement("div",{className:this.state.marginsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.marginsOpen?"margin-controller-section open":"margin-controller-section close"},r.a.createElement("div",{className:"margin-controller margin-top-controller"},r.a.createElement("label",{htmlFor:"marginTop"},"Top Margin",r.a.createElement("input",{type:"number",name:"marginTop",min:"0",max:"100",value:e[0],onChange:this.updateMargin}))),r.a.createElement("div",{className:"margin-controller margin-right-controller"},r.a.createElement("label",{htmlFor:"marginRight"},"Right Margin",r.a.createElement("input",{type:"number",name:"marginRight",min:"0",max:"100",value:e[1],onChange:this.updateMargin}))),r.a.createElement("div",{className:"margin-controller margin-bottom-controller"},r.a.createElement("label",{htmlFor:"marginBottom"},"Bottom Margin",r.a.createElement("input",{type:"number",name:"marginBottom",min:"0",max:"100",value:e[2],onChange:this.updateMargin}))),r.a.createElement("div",{className:"margin-controller margin-left-controller"},r.a.createElement("label",{htmlFor:"marginLeft"},"Left Margin",r.a.createElement("input",{type:"number",name:"marginLeft",min:"0",max:"100",value:e[3],onChange:this.updateMargin})))),r.a.createElement("div",{className:"paddings-editor-title background-options-title",onClick:this.togglePaddingsOpen},"Paddings",r.a.createElement("div",{className:this.state.paddingsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.paddingsOpen?"padding-controller-section open":"padding-controller-section close"},r.a.createElement("div",{className:"margin-controller margin-top-controller"},r.a.createElement("label",{htmlFor:"paddingTop"},"Top Padding",r.a.createElement("input",{type:"number",name:"paddingTop",min:"0",max:"100",value:t[0],onChange:this.updatePadding}))),r.a.createElement("div",{className:"margin-controller margin-right-controller"},r.a.createElement("label",{htmlFor:"paddingRight"},"Right Padding",r.a.createElement("input",{type:"number",name:"paddingRight",min:"0",max:"100",value:t[1],onChange:this.updatePadding}))),r.a.createElement("div",{className:"margin-controller margin-bottom-controller"},r.a.createElement("label",{htmlFor:"paddingBottom"},"Bottom Padding",r.a.createElement("input",{type:"number",name:"paddingBottom",min:"0",max:"100",value:t[2],onChange:this.updatePadding}))),r.a.createElement("div",{className:"margin-controller margin-left-controller"},r.a.createElement("label",{htmlFor:"paddingLeft"},"Left Padding",r.a.createElement("input",{type:"number",name:"paddingLeft",min:"0",max:"100",value:t[3],onChange:this.updatePadding})))),r.a.createElement(Be,{deleteSection:this.props.deleteSection,index:this.props.index})))}}]),t}(r.a.Component),Ve=a(68),Ye=a(35),Je=a(69),We=(a(167),{inlineStyleFn:function(e){e.filter((function(e){return console.log(e)}));var t=e.filter((function(e){return e.startsWith("color-")})).first(),a=e.filter((function(e){return e.startsWith("fontsize-")})).first(),n={element:"span",style:{}};return t&&(n.style.color=t.replace("color-","")),a&&(n.style.fontSize=a.replace("fontsize-","")),n}}),qe=function(e){function t(){var e;Object(o.a)(this,t),e=Object(l.a)(this,Object(d.a)(t).call(this));var a=Ye.EditorState.createEmpty();return e.state={editorState:a},e.onEditorStateChange=e.onEditorStateChange.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onEditorStateChange",value:function(e){this.setState({editorState:e});var t=this.state.editorState.getCurrentContent(),a=Object(Je.stateToHTML)(t,We);this.props.updateText(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-section-text-editor"},r.a.createElement(Ve.Editor,{ref:this.setEditor,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange,blockRendererFn:this.myBlockRenderer,blockStyleFn:this.myBlockStyleFunction,toolbar:{options:["inline","blockType","fontSize","fontFamily","colorPicker","link","history"],fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana","Wingdings","SNFS"]}}}))}}]),t}(r.a.Component),ze=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={imageSelected:!1,image:[]},e.imageSelected=e.imageSelected.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"imageSelected",value:function(e){e.preventDefault();var t=this.refs.imageRef.files[0],a=new FileReader;a.readAsDataURL(t);a.onloadend=function(e){this.setState({imgSrc:[a.result]}),this.props.updateImage(t)}.bind(this)}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-section-image-adder"},r.a.createElement("input",{className:"cms-btn",name:"image",type:"file",accept:"image/png, image/jpg, image/jpeg image/gif",onChange:this.imageSelected,ref:"imageRef",required:!0}),r.a.createElement("div",{className:"image-preview"},r.a.createElement("img",{src:this.state.imgSrc})))}}]),t}(r.a.Component);var Xe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={showModal:!1,sectionToAdd:"text",contentToAdd:"",imageToAdd:null},e.toggleModal=e.toggleModal.bind(Object(Ce.a)(e)),e.handleChange=e.handleChange.bind(Object(Ce.a)(e)),e.addSection=e.addSection.bind(Object(Ce.a)(e)),e.updateText=e.updateText.bind(Object(Ce.a)(e)),e.updateImageToAdd=e.updateImageToAdd.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"handleChange",value:function(e){this.setState({sectionToAdd:e.target.value})}},{key:"addSection",value:function(e){if(e.preventDefault(),"text"===this.state.sectionToAdd)this.props.addSection(this.state.sectionToAdd,this.state.contentToAdd);else if("image"===this.state.sectionToAdd){var t=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<15;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();this.props.addImageSection(t,this.state.imageToAdd)}this.toggleModal()}},{key:"updateText",value:function(e){this.setState({contentToAdd:e})}},{key:"updateImageToAdd",value:function(e){console.log(e),this.setState({imageToAdd:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-section-wrapper"},r.a.createElement("button",{className:"cms-btn",onClick:this.toggleModal},"Add Section"),r.a.createElement(Ie,{show:this.state.showModal,className:"add-section-modal",onClose:this.toggleModal},r.a.createElement("div",{className:"add-section-modal-title"},"Add Section"),r.a.createElement("form",{className:"add-section-options",onSubmit:this.addSection},r.a.createElement("label",{htmlFor:"section-type-select"},"Choose a section type"),r.a.createElement("select",{className:"section-type-select",onChange:this.handleChange},r.a.createElement("option",{value:"text"},"Text"),r.a.createElement("option",{value:"image"},"Image")),"text"===this.state.sectionToAdd?r.a.createElement("div",{className:"text-editor-wrapper"},r.a.createElement(qe,{updateText:this.updateText})):r.a.createElement("div",{className:"image-adder-wrapper"},r.a.createElement(ze,{updateImage:this.updateImageToAdd})),r.a.createElement("input",{className:"cms-btn",type:"submit",value:"Submit"}))))}}]),t}(r.a.Component),He=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={pageSectionsOpen:!1},a.togglePageSectionsOpen=a.togglePageSectionsOpen.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"togglePageSectionsOpen",value:function(){this.setState({pageSectionsOpen:!this.state.pageSectionsOpen})}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.sections.length;t++)e.push(r.a.createElement(Qe,{sectionData:this.props.sections[t],deleteSection:this.props.deleteSection,updateTextSection:this.props.updateTextSection,index:t,key:t}));return r.a.createElement("div",{className:"edit-sections-wrapper"},r.a.createElement("div",{className:"edit-sections-title",onClick:this.togglePageSectionsOpen},"Page Sections",r.a.createElement("div",{className:this.state.pageSectionsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),r.a.createElement("div",{className:this.state.pageSectionsOpen?"edit-sections open":"edit-sections close"},e,r.a.createElement(Xe,{addSection:this.props.addSection,addImageSection:this.props.addImageSection})))}}]),t}(r.a.Component),$e=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={show:!1},e.toggleShow=e.toggleShow.bind(Object(Ce.a)(e)),e.updateStyle=e.updateStyle.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleShow",value:function(){this.setState({show:!this.state.show})}},{key:"updateStyle",value:function(){this.props.updateStyle()}},{key:"render",value:function(){return r.a.createElement("div",{className:"edit-tab "+(this.state.show?"show":"hide")},r.a.createElement("div",{className:"edit-tab-header"},r.a.createElement("button",{className:"cms-btn",onClick:this.toggleShow},"Hide edit tab")),r.a.createElement("div",{className:"edit-tab-controls"},r.a.createElement(Fe,{style:this.props.style.background,updateBackground:this.props.updateBackground,postBackground:this.props.postBackground}),r.a.createElement(He,{sections:this.props.style.sections,addSection:this.props.addSection,addImageSection:this.props.addImageSection,deleteSection:this.props.deleteSection,updateTextSection:this.props.updateTextSection})),r.a.createElement("div",{className:"show-btn",onClick:this.toggleShow},"Show edit tab"),r.a.createElement("button",{className:"cms-btn",onClick:this.updateStyle},"Update Page"))}}]),t}(r.a.Component);var Ke=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.data,a={marginTop:this.props.data.margin[0],marginRight:this.props.data.margin[1],marginBottom:this.props.data.margin[2],marginLeft:this.props.data.margin[3],paddingTop:this.props.data.padding[0],paddingRight:this.props.data.padding[1],paddingBottom:this.props.data.padding[2],paddingLeft:this.props.data.padding[3]};return r.a.createElement("span",{style:a,dangerouslySetInnerHTML:(e=t.html,{__html:e})})}}]),t}(r.a.Component),Ze=(r.a.Component,function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.textSubsections[0].props.data,t={marginTop:e.margin[0],marginRight:e.margin[1],marginBottom:e.margin[2],marginLeft:e.margin[3],paddingTop:e.padding[0],paddingRight:e.padding[1],paddingBottom:e.padding[2],paddingLeft:e.padding[3]},a=[],n=0;n<this.props.textSubsections.length;n++){var i=this.props.textSubsections[n].props.data;a.push(r.a.createElement(Ke,{key:n,data:i}))}return r.a.createElement("div",{style:t},a)}}]),t}(r.a.Component)),et=a(172),tt=a.n(et);var at={inlineStyleFn:function(e){e.filter((function(e){return console.log(e)}));var t=e.filter((function(e){return e.startsWith("color-")})).first(),a=e.filter((function(e){return e.startsWith("fontsize-")})).first(),n=e.filter((function(e){return e.startsWith("fontfamily-")})).first(),r=e.filter((function(e){return e.startsWith("textalign-")})).first(),i={element:"span",style:{}};return t&&(i.style.color=t.replace("color-","")),a&&(i.style.fontSize=a.replace("fontsize-","")),n&&(i.style.fontFamily=n.replace("fontfamily-","")),r&&(i.style.textAlignment=r.replace("textalign-","")),i}},nt=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));for(var n="",r=0;r<e.textSubsections.length;r++)n+=e.textSubsections[r].props.data.html;var i=tt()(n),s=Ye.ContentState.createFromBlockArray(i),c=Ye.EditorState.createWithContent(s);return a.state={editorState:c},a.state={editorState:a.state.editorState},a.onChange=function(e){return a.setState({editorState:e})},a.setEditor=function(e){a.editor=e},a.updateText=a.updateText.bind(Object(Ce.a)(a)),a.onEditorStateChange=a.onEditorStateChange.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateText",value:function(){var e=this.props.pageSectionIndex,t=this.state.editorState.getCurrentContent(),a=Object(Je.stateToHTML)(t,at);console.log(e),console.log(a),this.props.updateText(e,a),this.props.updateView()}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"edit-page-section"},r.a.createElement(Ve.Editor,{ref:this.setEditor,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange,blockRendererFn:this.myBlockRenderer,blockStyleFn:this.myBlockStyleFunction,toolbar:{options:["inline","blockType","fontSize","fontFamily","colorPicker","link","history"],fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana","Wingdings","SNFS"]}}}),r.a.createElement("div",{className:"update-btn cms-btn",onClick:this.updateText},"Update"))}}]),t}(r.a.Component),rt=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));for(var n=e.textSubsections[0].props.data.html,r=n.match(/'([^']+)'/)[1],i=n.match(/\(.*?\)/g),s=[],c=0;c<i.length;c++){var u=i[c];s.push(u.substring(1,u.length-1))}for(var m=[],g=0;g<s.length;g++){var p=s[g].split(", ");m.push(p)}for(var h=m.flat(),E=0;E<h.length;E++)h[E]=h[E].replace("deg","");return a.state={skewX:h[0],skewY:h[1],rotate:h[2],scaleX:h[3],scaleY:h[4],imageSrc:r},a.handleChange=a.handleChange.bind(Object(Ce.a)(a)),a.updateStyle=a.updateStyle.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(ke.a)({},e.target.name,e.target.value))}},{key:"updateStyle",value:function(){var e="skew("+this.state.skewX+"deg, "+this.state.skewY+"deg) "+("rotate("+this.state.rotate+"deg) ")+("scale("+this.state.scaleX+", "+this.state.scaleY+") "),t="<img src='"+this.state.imageSrc+"' style='transform: "+e+";' />";console.log(t),this.props.updateText(this.props.pageSectionIndex,t),this.props.updateView()}},{key:"render",value:function(){var e={transform:"skew("+this.state.skewX+"deg, "+this.state.skewY+"deg) "+("rotate("+this.state.rotate+"deg) ")+("scale("+this.state.scaleX+", "+this.state.scaleY+") ")};return r.a.createElement("div",{className:"edit-page-image-section"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:this.state.imageSrc,style:e})),r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"skew-x"},"X Skew",r.a.createElement("input",{type:"range",id:"skewX",name:"skewX",min:"-360",max:"360",value:this.state.skewX,onChange:this.handleChange})),r.a.createElement("div",{className:"skew-y"},"Y Skew",r.a.createElement("input",{type:"range",id:"skewY",name:"skewY",min:"-360",max:"360",value:this.state.skewY,onChange:this.handleChange})),r.a.createElement("div",{className:"rotate"},"Rotate",r.a.createElement("input",{type:"range",id:"rotate",name:"rotate",min:"-360",max:"360",value:this.state.rotate,onChange:this.handleChange})),r.a.createElement("div",{className:"scaleX"},"Scale X",r.a.createElement("input",{type:"range",id:"scaleX",name:"scaleX",min:"0",max:"5",step:"0.05",value:this.state.scaleX,onChange:this.handleChange})),r.a.createElement("div",{className:"scaleY"},"Scale Y",r.a.createElement("input",{type:"range",id:"scaleY",name:"scaleY",min:"0",max:"5",step:"0.05",value:this.state.scaleY,onChange:this.handleChange})),r.a.createElement("button",{className:"cms-btn edit-image-section-submit",onClick:this.updateStyle},"Update")))}}]),t}(r.a.Component),it=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={viewMode:!0,editMode:!1,showEditButton:!1,view:e.view},a.toggleEditButton=a.toggleEditButton.bind(Object(Ce.a)(a)),a.enterViewMode=a.enterViewMode.bind(Object(Ce.a)(a)),a.enterEditMode=a.enterEditMode.bind(Object(Ce.a)(a)),a.updateText=a.updateText.bind(Object(Ce.a)(a)),a.updateViewToEdit=a.updateViewToEdit.bind(Object(Ce.a)(a)),a.updateViewToView=a.updateViewToView.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleEditButton",value:function(){this.setState({showEditButton:!this.state.showEditButton})}},{key:"enterViewMode",value:function(){this.setState({viewMode:!0,editMode:!1})}},{key:"enterEditMode",value:function(){this.setState({viewMode:!1,editMode:!0})}},{key:"updateText",value:function(e,t){this.props.updateText(this.props.pageSectionIndex,t)}},{key:"updateViewToEdit",value:function(){console.log(this.props.style.sectionType),this.props.updateView("edit",this.props.pageSectionIndex)}},{key:"updateViewToView",value:function(){this.props.updateView("view",this.props.pageSectionIndex)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.style.text.length;t++)e.push(r.a.createElement(Ke,{key:t,data:this.props.style.text[t]}));var a={display:this.state.showEditButton?"block":"none"},n=this.props.pageSectionIndex,i=(this.props.viewArr[n],"view"===this.props.viewArr[n]),s="image"===this.props.style.sectionType;return r.a.createElement("div",{className:"section section-"+this.props.style.sectionType,onMouseEnter:this.toggleEditButton,onMouseLeave:this.toggleEditButton},r.a.createElement("div",{className:"edit-btn",style:a,onClick:this.updateViewToEdit},"Edit"),i?r.a.createElement(Ze,{pageSectionIndex:this.props.pageSectionIndex,textSubsections:e,updateViewTo:this.props.updateView}):s?r.a.createElement(rt,{pageSectionIndex:this.props.pageSectionIndex,textSubsections:e,updateText:this.updateText,updateView:this.updateViewToView}):r.a.createElement(nt,{pageSectionIndex:this.props.pageSectionIndex,textSubsections:e,updateText:this.updateText,updateView:this.updateViewToView}))}}]),t}(r.a.Component),st=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={style:null},e.renderStyle=e.renderStyle.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderStyle",value:function(){}},{key:"render",value:function(){if(this.props.style){this.renderStyle();for(var e=[],t=0;t<this.props.style.sections.length;t++)e.push(r.a.createElement(it,{key:t,style:this.props.style.sections[t],pageSectionIndex:t,updateText:this.props.updateTextSection,viewArr:this.props.viewArr,updateView:this.props.updateView}));var a={backgroundColor:this.props.style.background.color,marginTop:this.props.style.background.margin[0],marginRight:this.props.style.background.margin[1],marginBottom:this.props.style.background.margin[2],marginLeft:this.props.style.background.margin[3],paddingTop:this.props.style.background.padding[0],paddingRight:this.props.style.background.padding[1],paddingBottom:this.props.style.background.padding[2],paddingLeft:this.props.style.background.padding[3]};return r.a.createElement("div",{className:"edit-page-root",style:a},e)}return r.a.createElement("div",{className:"loading"})}}]),t}(r.a.Component),ot=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));var n=e.match.params.siteURL;return a.state={siteURL:n},document.title=n,a.props.getStyle(n),a.addSection=a.addSection.bind(Object(Ce.a)(a)),a.addImageSection=a.addImageSection.bind(Object(Ce.a)(a)),a.deleteSection=a.deleteSection.bind(Object(Ce.a)(a)),a.updateTextSection=a.updateTextSection.bind(Object(Ce.a)(a)),a.updateTextSectionJSON=a.updateTextSectionJSON.bind(Object(Ce.a)(a)),a.updateSiteBackground=a.updateSiteBackground.bind(Object(Ce.a)(a)),a.updateStyle=a.updateStyle.bind(Object(Ce.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"addSection",value:function(e,t){var a=JSON.parse(this.props.editSite.style.results.getStyle),n={sectionType:e,text:[{margin:[0,0,0,0],padding:[0,0,0,0],html:t.replace(/"/g,"'")}]};a.sections.push(n),this.props.addSection(this.state.siteURL,a)}},{key:"addImageSection",value:function(e,t,a){console.log(a);var n=JSON.parse(this.props.editSite.style.results.getStyle),r={sectionType:"image",text:[{margin:[0,0,0,0],padding:[0,0,0,0],html:"<img src='/cms-api/get-image/"+this.state.siteURL+"/"+e+"' + style='transform: skew(0deg, 0deg) rotate(0deg) scale(1, 1) ;' />"}]};n.sections.push(r),console.log(n),this.props.addImageSection(this.state.siteURL,e,t,n)}},{key:"deleteSection",value:function(e){var t=JSON.parse(this.props.editSite.style.results.getStyle),a=t.sections;a.splice(e,1),t.sections=a,this.props.editSection(this.state.siteURL,t)}},{key:"updateSiteBackground",value:function(e){var t=this.props.editSite.style.results.getStyle,a=JSON.parse(t);a.background=e;var n=JSON.stringify(a),r=this.props.editSite.style;r.results.getStyle=n,this.props.updateSiteBackground(r)}},{key:"updateTextSection",value:function(e,t){var a=JSON.parse(this.props.editSite.style.results.getStyle),n=t.replace(/"/g,"'");a.sections[e].text[0].html=n,this.props.editSection(this.state.siteURL,a)}},{key:"updateStyle",value:function(){var e=this.props.editSite.style.results.getStyle;this.props.editSection(this.state.siteURL,JSON.parse(e))}},{key:"updateTextSectionJSON",value:function(e,t){var a=JSON.parse(this.props.editSite.style.results.getStyle);a.sections[e]=t,this.props.editSection(this.state.siteURL,a)}},{key:"render",value:function(){if(this.props.editSite.style){var e=JSON.parse(this.props.editSite.style.results.getStyle);return r.a.createElement("div",{className:"edit-site"},r.a.createElement($e,{style:e,addSection:this.addSection,addImageSection:this.addImageSection,deleteSection:this.deleteSection,updateBackground:this.updateSiteBackground,postBackground:this.props.postSiteBackground,updateTextSection:this.updateTextSectionJSON,updateStyle:this.updateStyle}),r.a.createElement(st,{style:e,updateTextSection:this.updateTextSection,viewArr:this.props.editSite.viewArr,updateView:this.props.updateView}))}return r.a.createElement("div",{className:"edit-site"},r.a.createElement("div",{className:"loading"}))}}]),t}(r.a.Component);var ct=Object(h.b)((function(e){return{editSite:e.editSite,viewArr:e.viewArr}}),(function(e){return{addSection:function(t,a){e(fe.addSection(t,a))},addImageSection:function(t,a,n,r){e(fe.addImageSection(t,a,n,r))},deleteSection:function(t,a){e(fe.deleteSection(t,a))},editSection:function(t,a,n){e(fe.editSection(t,a,n))},getStyle:function(t){e(fe.getStyle(t))},updateSiteBackground:function(t){e(fe.updateSiteBackground(t))},postSiteBackground:function(){e(fe.postSiteBackground())},updateSectionBackground:function(t){e(fe.updateSectionBackground(t))},updateView:function(t,a){e(fe.updateView(t,a))}}}))(ot),lt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.style){console.log(this.props.style.sections);for(var e=[],t=0;t<this.props.style.sections.length;t++)e.push(r.a.createElement(it,{key:t,style:this.props.style.sections[t],pageSectionIndex:t,viewArr:this.props.viewArr}));var a={backgroundColor:this.props.style.background.color,marginTop:this.props.style.background.margin[0],marginRight:this.props.style.background.margin[1],marginBottom:this.props.style.background.margin[2],marginLeft:this.props.style.background.margin[3],paddingTop:this.props.style.background.padding[0],paddingRight:this.props.style.background.padding[1],paddingBottom:this.props.style.background.padding[2],paddingLeft:this.props.style.background.padding[3]};return r.a.createElement("div",{className:"view-page-root",style:a},e)}}}]),t}(r.a.Component);var dt=function(e){function t(e){var a,n;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e)),n=window.location.pathname.slice(9);e.getComments(n);return a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(this.props),this.props.loading?r.a.createElement("div",{className:"loading"}):this.props.comments.length>0?(console.log("this one"),console.log(this.props.comments.length),r.a.createElement("div",{className:"comments-list"},this.props.comments.map((function(e,t){return r.a.createElement("div",{className:"comment",key:t},r.a.createElement("div",{className:"commenter"},e.commenter_name,":"),r.a.createElement("div",{className:"comment-body"},e.comment_text))})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{fontSize:64}},"no comments yet"),r.a.createElement("div",{className:"loading"},"bruh"))}}]),t}(r.a.Component),ut=Object(h.b)((function(e){return e.comment.comment,console.log(e.comment),e.comment}),(function(e){return{getComments:function(t){e(Ee.getComments(t))}}}))(dt),mt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={submitted:!1,commentText:"",commenterName:""},e.handleChange=e.handleChange.bind(Object(Ce.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Ce.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(ke.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=this.props.dispatch;if(t.commentText&&t.commenterName){var n={commentText:t.commentText,commenterName:t.commenterName};a(Ee.newComment(n))}}},{key:"render",value:function(){return r.a.createElement("form",{name:"comment-form",className:"write-comment",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"new-comment"},"NEW COMMENT"),r.a.createElement("label",{className:"fuckin-input",htmlFor:"commenterName"},r.a.createElement(r.a.Fragment,null,"What is your fucking Name:"),r.a.createElement("input",{name:"commenterName",type:"text",value:this.state.value,onChange:this.handleChange,required:!0})),r.a.createElement("label",{className:"fuckin-input",htmlFor:"commentText"},"Comment:",r.a.createElement("input",{name:"commentText",type:"text",value:this.state.value,onChange:this.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"submit cms-btn"},"Post comment")))}}]),t}(r.a.Component);var gt=Object(h.b)((function(e){return{registering:e.registration.registering}}))(mt),pt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("comments"),r.a.createElement("div",{className:"comments"},r.a.createElement("div",{className:"comments-title"},"COMMENTS"),r.a.createElement(ut,null),r.a.createElement(gt,null))}}]),t}(r.a.Component),ht=a(173),Et=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));var n=e.match.params.siteURL;return a.state={siteURL:n},document.title=n,a.props.getStyle(n),a.props.getTitle(n),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.editSite.style){var e=JSON.parse(this.props.editSite.style.results.getStyle),t=(this.props.editSite.style.results.getStyle,"");return this.props.editSite.title&&(t=this.props.editSite.title.results.getTitle),r.a.createElement("div",{className:"view-site"},r.a.createElement(ht.Helmet,null,r.a.createElement("meta",{property:"og:title",content:this.state.siteURL}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:image",content:"".concat("/sites","/cms-api/get-social-image/").concat(this.state.siteURL)}),r.a.createElement("meta",{property:"og:url",content:"".concat("/sites","/p/").concat(this.state.siteURL)}),r.a.createElement("meta",{property:"og:site_name",content:t}),r.a.createElement("meta",{name:"twitter:card",value:"look at this cool site"}),r.a.createElement("meta",{name:"twitter:site",content:"@aaddllaaii"}),r.a.createElement("meta",{name:"twitter:creator",content:"@aaddllaaii"}),r.a.createElement("meta",{name:"twitter:title",content:this.state.siteURL}),r.a.createElement("meta",{name:"twitter:image",content:"".concat("/sites","/cms-api/get-social-image/").concat(this.state.siteURL)}),r.a.createElement("title",null,t)),r.a.createElement(lt,{style:e,viewArr:this.props.editSite.viewArr}),r.a.createElement(pt,null))}return r.a.createElement("div",{className:"loading"})}}]),t}(r.a.Component);var St=Object(h.b)((function(e){return{editSite:e.editSite}}),(function(e){return{getStyle:function(t){e(fe.getStyle(t))},getTitle:function(t){e(fe.getTitle(t))}}}))(Et),bt=function(e){function t(e){var a;Object(o.a)(this,t);var n=(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).props.dispatch;return V.listen((function(e,t){n(ve.clear())})),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{basename:"/sites",history:V},r.a.createElement(g.a,null,r.a.createElement(p.a,{exact:!0,path:"".concat("/sites","/"),component:ye}),r.a.createElement(p.a,{path:"".concat("/sites","/dashboard"),render:function(e){return r.a.createElement(_e,null)}}),r.a.createElement(p.a,{path:"".concat("/sites","/login"),component:Pe}),r.a.createElement(p.a,{path:"".concat("/sites","/register"),component:xe}),r.a.createElement(p.a,{path:"".concat("/sites","/edit-site/:siteURL"),component:ct}),r.a.createElement(p.a,{path:"".concat("/sites","/p/:siteURL"),component:St})))}}]),t}(r.a.Component);var ft=Object(h.b)((function(e){return{alert:e.alert}}))(bt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(h.a,{store:ee},r.a.createElement((function(){return r.a.createElement(ft,null)}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[176,1,2]]]);
//# sourceMappingURL=main.b4dd861b.chunk.js.map