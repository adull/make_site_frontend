(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,a){e.exports=a(462)},181:function(e,t,a){},462:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(40),s=a.n(r),o=(a(181),a(2)),c=a(3),l=a(6),d=a(4),u=a(5),g=a(466),p=a(465),m=a(464),E=a(15),h=a(463),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(h.a,{className:"featured-page",to:"".concat("/sites","/p/").concat(this.props.data.url)},i.a.createElement("div",{className:"featured-page-title"},this.props.data.title),i.a.createElement("div",{className:"featured-page-author"},"By: ",this.props.data.author))}}]),t}(i.a.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.pages.length;t++)e.push(i.a.createElement(S,{data:this.props.pages[t],key:t}));return i.a.createElement("div",{className:"featured-pages"},i.a.createElement("div",{className:"featured-pages-title"},"Featured Pages"),i.a.createElement("div",{className:"featured-pages-links"},e))}}]),t}(i.a.Component),f={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",CLEAR:"ALERT_CLEAR"},O={GETFEATUREDSITES_REQUEST:"GETFEATUREDSITES_REQUEST",GETFEATUREDSITES_SUCCESS:"GETFEATUREDSITES_SUCCESS",GETFEATUREDSITES_FAILURE:"GETFEATUREDSITES_FAILURE",GETALLSITES_REQUEST:"GETALLSITES_REQUEST",GETALLSITES_SUCCESS:"GETALLSITES_SUCCESS",GETALLSITES_FAILURE:"GETALLSITES_FAILURE"},v={GETPAGES_REQUEST:"GETPAGES_REQUEST",GETPAGES_SUCCESS:"GETPAGES_SUCCESS",GETPAGES_FAILURE:"GETPAGES_FAILURE",NEWPAGE_REQUEST:"NEWPAGE_REQUEST",NEWPAGE_SUCCESS:"NEWPAGE_SUCCESS",NEWPAGE_FAILURE:"NEWPAGE_FAILURE",DELETEPAGE_REQUEST:"DELETEPAGE_REQUEST",DELETEPAGE_SUCCESS:"DELETEPAGE_SUCCESS",DELETEPAGE_FAILURE:"DELETEPAGE_FAILURE",TOGGLE_ADD_PAGE_MODAL:"TOGGLE_ADD_PAGE_MODAL",TOGGLE_DELETE_PAGE_MODAL:"TOGGLE_DELETE_PAGE_MODAL"},T={ADDSECTION_REQUEST:"ADDSECTION_REQUEST",ADDSECTION_SUCCESS:"ADDSECTION_SUCCESS",ADDSECTION_FAILURE:"ADDSECTION_FAILURE",ADDIMAGESECTION_REQUEST:"ADDIMAGESECTION_REQUEST",ADDIMAGESECTION_SUCCESS:"ADDIMAGESECTION_SUCCESS",ADDIMAGESECTION_FAILURE:"ADDIMAGESECTION_FAILURE",DELETESECTION_REQUEST:"DELETESECTION_REQUEST",DELETSECTION_SUCCESS:"DELETESECTION_SUCCESS",DELETESECTION_FAILURE:"DELETESECTION_FAILURE",EDITORSITE_CHANGE:"EDITORSTATE_CHANGE",UPDATEVIEWARRAY:"UDPATEVIEWARRAY",EDITSECTION_REQUEST:"EDITSECTION_REQUEST",EDITSECTION_SUCCESS:"EDITSECTION_SUCCESS",EDITSECTION_FAILURE:"EDITSECTION_FAILURE",GETSTYLE_REQUEST:"GETSTYLE_REQUEST",GETSTYLE_SUCCESS:"GETSTYLE_SUCCESS",GETSTYLE_FAILURE:"GETSTYLE_FAILURE",GETTITLE_REQUEST:"GETTITLE_REQUEST",GETTITLE_SUCCESS:"GETTITLE_SUCCESS",GETTITLE_FAILURE:"GETTITLE_FAILURE",UPDATESTYLE:"UPDATESTYLE"},y={REGISTER_REQUEST:"USERS_REGISTER_REQUEST",REGISTER_SUCCESS:"USERS_REGISTER_SUCCESS",REGISTER_FAILURE:"USERS_REGISTER_FAILURE",LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT_REQUEST",LOGOUT_SUCCESS:"USERS_LOGOUT_SUCCESS",LOGOUT_FAILURE:"USERS_LOGOUT_FAILURE",GETALL_REQUEST:"USERS_GETALL_REQUEST",GETALL_SUCCESS:"USERS_GETALL_SUCCESS",GETALL_FAILURE:"USERS_GETALL_FAILURE"},C=a(71),j=Object(C.a)(),A=a(41),L=a(170),N={type:"",message:""};var R=JSON.parse(localStorage.getItem("user")),k=R?{loggedIn:!0,user:R}:{};var U=a(8);var I={showAddPageModal:!1,showDeletePageModal:!1};var w={viewArr:[]};var _=a(175);var P=Object(A.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SUCCESS:return{type:"alert-success",message:t.message};case f.ERROR:return{type:"alert-danger",message:t.message};case f.CLEAR:return{initialState:N};default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case y.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user};case y.LOGIN_FAILURE:case y.LOGOUT:return{};default:return e}},browseSite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.GETFEATUREDSITES_REQUEST:return Object(U.a)({},e,{loading:!0});case O.GETFEATUREDSITES_SUCCESS:return console.log(t),Object(U.a)({},e,{featuredSites:t.pages,loading:!1});case O.GETFEATUREDSITES_FAILURE:return Object(U.a)({},e,{error:t.error});case O.GETALLSITES_REQUEST:return Object(U.a)({},e,{loading:!0});case O.GETALLSITES_SUCCESS:return console.log(t),Object(U.a)({},e,{allSites:t.pages,loading:!1});case O.GETALLSITES_FAILURE:return Object(U.a)({},e,{error:t.error});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.GETPAGES_REQUEST:return Object(U.a)({},e,{loading:!0});case v.GETPAGES_SUCCESS:return Object(U.a)({},e,{items:t.pageData});case v.GETPAGES_FAILURE:return Object(U.a)({},e,{error:t.error});case v.NEWPAGE_REQUEST:return Object(U.a)({},e,{loading:!0});case v.NEWPAGE_SUCCESS:return Object(U.a)({},e,{items:t.pageData,showAddPageModal:!1});case v.NEWPAGE_FAILURE:return Object(U.a)({},e,{error:t.error});case v.DELETEPAGE_REQUEST:return Object(U.a)({},e,{loading:!0});case v.DELETEPAGE_SUCCESS:return console.log(t),Object(U.a)({},e,{loading:!1,items:t.pageData,showDeletePageModal:!1});case v.DELETEPAGE_FAILURE:return Object(U.a)({},e,{error:t.error});case v.TOGGLE_ADD_PAGE_MODAL:return Object(U.a)({},e,{showAddPageModal:!e.showAddPageModal});case v.TOGGLE_DELETE_PAGE_MODAL:return Object(U.a)({},e,{showDeletePageModal:!e.showDeletePageModal});default:return e}},editSite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.EDITORSTATE_CHANGE:var a=d;return a[t.index]=t.editorState,Object(U.a)({},e,{viewArr:a});case T.ADDSECTION_REQUEST:var n={getStyle:JSON.stringify(t.style)};return Object(U.a)({},e,{results:n});case T.ADDIMAGESECTION_REQUEST:return Object(U.a)({},e,{loading:!0});case T.ADDIMAGESECTION_SUCCESS:var i=t.sectionData.body;console.log(i);var r={success:!0,results:{getStyle:i}};return Object(U.a)({},e,{style:r});case T.ADDSECTION_SUCCESS:console.log("added section");var s={success:!0,results:{getStyle:t.sectionData.body}};return console.log(s),Object(U.a)({},e,{style:s});case T.ADDSECTION_FAILURE:return Object(U.a)({},e);case T.UPDATEVIEWARRAY:return(a=e.viewArr)[t.index]=t.view,Object(U.a)({},e,{viewArr:a});case T.EDITSECTION_REQUEST:return Object(U.a)({},e);case T.EDITSECTION_SUCCESS:var o={getStyle:JSON.stringify(t.editData)};console.log(o);var c={success:!0,results:o};return console.log(c),Object(U.a)({},e,{style:c});case T.EDITSECTION_FAILURE:return Object(U.a)({},e);case T.GETSTYLE_REQUEST:return Object(U.a)({},e,{loading:!0});case T.GETSTYLE_SUCCESS:t.style.results.getStyle=t.style.results.getStyle.replace(/\n/g,"");for(var l=JSON.parse(t.style.results.getStyle).sections,d=[],u=0;u<l.length;u++)d.push("view");return Object(U.a)({},e,{style:t.style,loading:!1,viewArr:d});case T.GETSTYLE_FAILURE:return{};case T.GETTITLE_REQUEST:return console.log("ge title request"),Object(U.a)({},e,{loading:!0});case T.GETTITLE_SUCCESS:return Object(U.a)({},e,{title:t.title,loading:!1});case T.GETTITLE_FAILURE:return Object(U.a)({},e);case T.UPDATESTYLE:return Object(U.a)({},e,{style:t.style});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case y.REGISTER_REQUEST:return{registering:!0};case y.REGISTER_SUCCESS:case y.REGISTER_FAILURE:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.GETALL_REQUEST:return{loading:!0};case y.GETALL_SUCCESS:return{items:t.users};case y.GETALL_FAILURE:return{error:t.error};case y.DELETE_REQUEST:return Object(U.a)({},e,{items:e.items.map(function(e){return e.id===t.id?Object(U.a)({},e,{deleting:!0}):e})});case y.DELETE_SUCCESS:return{items:e.items.filter(function(e){return e.id!==t.id})};case y.DELETE_FAILURE:return Object(U.a)({},e,{items:e.items.map(function(e){if(e.id===t.id){e.deleting;var a=Object(_.a)(e,["deleting"]);return Object(U.a)({},a,{deleteError:t.error})}return e})});default:return e}}}),G=Object(A.d)(P,Object(A.a)(L.a));function D(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var x={getFeaturedPages:function(){var e={method:"GET",headers:D()};return fetch("/cms-api/get-featured-pages",e).then(M).then(function(e){return console.log(e),e})},getAllPages:function(){var e={method:"GET",headers:D()};return fetch("/cms-api/get-all-pages",e).then(M).then(function(e){return console.log(e),e})}};function M(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){console.log("sucess is false");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}console.log("error error"),401===e.status&&console.log("weird response");var i=a&&a.message||e.statusText;return Promise.reject(i)})}var F={newPage:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/cms-api/new-page",t).then(B).then(function(e){return console.log(e),e})},getPages:function(){var e={method:"GET",headers:D()};return fetch("/cms-api/get-my-pages",e).then(B).then(function(e){return e})},deletePage:function(e){console.log("delete page in service");var t={method:"GET",headers:D()};return fetch("/cms-api/delete-page/"+e,t).then(B).then(function(e){return console.log(e),e})}};function B(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){console.log("sucess is false");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}console.log("error error"),401===e.status&&console.log("weird response");var i=a&&a.message||e.statusText;return Promise.reject(i)})}var Q={addSection:V,addImageSection:function(e,t,a,n){if(void 0===n)return;var i=new FormData;return i.append("name",t),i.append("style",JSON.stringify(n)),i.append("image",a),V(e,i,"image"),fetch("/cms-api/add-image-section/"+e,{method:"POST",body:i}).then(Y).then(function(e){return e})},editSection:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("/cms-api/edit-section/"+e,a).then(Y).then(function(e){return e})},getStyle:function(e){var t={method:"GET",headers:D()};return fetch("/cms-api/get-style/"+e,t).then(Y).then(function(e){return e})},getTitle:function(e){var t={method:"GET",headers:D()};return fetch("/cms-api/get-title/"+e,t).then(Y).then(function(e){return e})}};function V(e,t,a){if("image"!==a){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("/cms-api/add-section/"+e,n).then(Y).then(function(e){return e})}}function Y(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(e.ok){if(!1===a.success){var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}e.status;var i=a&&a.message||e.statusText;return Promise.reject(i)})}var J={login:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/cms-api/user-login",t).then(X).then(function(e){return localStorage.setItem("user",JSON.stringify(e)),e})},logout:W,register:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e,t)};return fetch("/cms-api/register",a).then(X)},getAll:function(){var e={method:"GET",headers:D()};return fetch("/cms-api/get-users",e).then(X)},getById:function(e){var t={method:"GET",headers:D()};return fetch("/cms-api/get-user/".concat(e),t).then(X)},update:function(e){var t={method:"PUT",headers:Object(U.a)({},D(),{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("/cms-api/users/".concat(e.id),t).then(X)}};function W(){localStorage.removeItem("user")}function X(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(console.log(a),e.ok){if(!1===a.success){console.log("sucess is false");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}401===e.status&&W();var i=a&&a.message||e.statusText;return Promise.reject(i)})}var q={login:function(e){return function(t){var a;t((a={loginData:e},{type:y.LOGIN_REQUEST,user:a})),J.login(e).then(function(a){t(function(e){return{type:y.LOGIN_SUCCESS,user:e}}(e)),j.push("".concat("/sites","/dashboard"))},function(e){t(function(e){return{type:y.LOGIN_FAILURE,error:e}}(e.toString())),t(Z.error(e.toString()))})}},logout:function(){return J.logout(),{type:y.LOGOUT}},register:function(e){return function(t){console.log("before calling dispatch request"),t(function(e){return{type:y.REGISTER_REQUEST,user:e}}(e)),console.log("after calling dispatch request"),J.register(e).then(function(e){t(function(e){return{type:y.REGISTER_SUCCESS,user:e}}()),j.push("".concat("/sites","/login")),t(Z.success("Succesfully registered"))},function(e){console.log("failure"),t(function(e){return{type:y.REGISTER_FAILURE,error:e}}(e.toString())),t(Z.error(e.toString()))})}},getAll:function(){return function(e){e({type:y.GETALL_REQUEST}),J.getAll().then(function(t){return e(function(e){return{type:y.GETALL_SUCCESS,users:e}}(t))},function(t){return e(function(e){return{type:y.GETALL_FAILURE,error:e}}(t.toString()))})}}};var z={getFeaturedPages:function(){return function(e){e({type:O.GETFEATUREDSITES_REQUEST}),x.getFeaturedPages().then(function(t){e(function(e){return{type:O.GETFEATUREDSITES_SUCCESS,pages:e.pages}}(t))},function(t){e(function(e){return{type:O.GETFEATUREDSITES_FAILURE,error:e}}(t.toString())),e(Z.error(t.toString()))})}},getAllPages:function(){return function(e){e({type:O.GETALLSITES_REQUEST}),x.getAllPages().then(function(t){e(function(e){return{type:O.GETALLSITES_SUCCESS,pages:e.pages}}(t))},function(t){e(function(e){return{type:O.GETALLSITES_FAILURE,error:e}}(t.toString())),e(Z.error(t.toString()))})}}};var H={newPage:function(e){return function(t){t({type:v.NEWPAGE_REQUEST}),F.newPage(e).then(function(e){var a;t((a=e,{type:v.NEWPAGE_SUCCESS,pageData:a.pages})),t(Z.success("New page succesfully added.")),console.log("ok now push to history"),$()},function(e){t(function(e){return{type:v.NEWPAGE_FAILURE,error:e}}(e.toString())),t(Z.error(e.toString()))})}},getPages:$,deletePage:function(e){return console.log("delete page"),function(t){t({type:v.DELETEPAGE_REQUEST}),F.deletePage(e).then(function(e){console.log(e),t(function(e){return console.log(e),{type:v.DELETEPAGE_SUCCESS,pageData:e.pages}}(e)),t(Z.success("Page succesfully deleted.")),console.log("ok now push to history"),$()},function(e){console.log(e),t(function(e){return{type:v.DELETEPAGE_FAILURE,error:e}}(e.toString())),t(Z.error(e.toString()))})}},toggleAddPageModal:function(){return function(e){e(Z.success("")),e({type:v.TOGGLE_ADD_PAGE_MODAL})}},toggleDeletePageModal:function(){return function(e){e(Z.success("")),e({type:v.TOGGLE_DELETE_PAGE_MODAL})}}};function $(){return function(e){e({type:v.GETPAGES_REQUEST}),F.getPages().then(function(t){var a;e((a=t,{type:v.GETPAGES_SUCCESS,pageData:a.results.getPages}))},function(t){console.log("error occuring here"),e(function(e){return{type:v.GETPAGES_FAILURE,error:e}}(t.toString())),e(Z.error(t.toString()))})}}var K={addSection:function(e,t){return function(a){a(function(e,t){return{type:T.ADDSECTION_REQUEST,siteURL:e,style:t}}(e,t)),Q.addSection(e,t).then(function(e){var t;a((t=e,{type:T.ADDSECTION_SUCCESS,sectionData:t}))},function(e){a(function(e){return{type:T.ADDSECTION_FAILURE,error:e}}(e.toString())),a(Z.error(e.toString()))})}},addImageSection:function(e,t,a,n){return function(i){i(function(e,t,a,n){return{type:T.ADDIMAGESECTION_REQUEST,siteURL:e,hash:t,image:a,style:n}}(e,t,a,n)),Q.addImageSection(e,t,a,n).then(function(e){var t;i((t=e,{type:T.ADDIMAGESECTION_SUCCESS,sectionData:t}))},function(e){i(function(e){return{type:T.ADDIMAGESECTION_FAILURE,error:e}}(e.toString())),i(Z.error(e.toString()))})}},deleteSection:function(e,t){return function(a){a(function(e,t){return{type:T.DELETSECTION_REQUEST,siteURL:e,sectionIndex:t}}(e,t)),Q.deleteSection(e,t).then(function(e){var t;a({type:T.DELETESECTION_SUCCESS,sectionData:t})},function(e){a(function(e){return{type:T.DELETESECTION_FAILURE,error:e}}(e.toString())),a(Z.error(e.toString()))})}},editSection:function(e,t){return function(a){a(function(e){return{type:T.EDITSECTION_REQUEST,editData:e}}(t)),Q.editSection(e,t).then(function(e){a(function(e){return{type:T.EDITSECTION_SUCCESS,editData:e}}(t))},function(e){a(function(e){return{type:T.EDITSECTION_FAILURE,error:e}}(e.toString())),a(Z.error(e.toString()))})}},getStyle:function(e){return function(t){t({type:T.GETSTYLE_REQUEST}),Q.getStyle(e).then(function(e){t(function(e){return{type:T.GETSTYLE_SUCCESS,style:e}}(e))},function(e){t(function(e){return{type:T.GETSTYLE_FAILURE,error:e}}(e.toString())),t(Z.error(e.toString()))})}},getTitle:function(e){return function(t){t({type:T.GETTITLE_REQUEST}),Q.getTitle(e).then(function(e){t(function(e){return{type:T.GETTITLE_SUCCESS,title:e}}(e))},function(e){t(function(e){return{type:T.GETTITLE_FAILURE,error:e}}(e.toString())),t(Z.error(e.toString()))})}},updateSiteBackground:function(e){return function(t){t(function(e){return{type:T.UPDATESTYLE,style:e}}(e))}},updateView:function(e,t){return function(a){a(function(e,t){return{type:T.UPDATEVIEWARRAY,view:e,index:t}}(e,t))}}};var Z={success:function(e){return{type:f.SUCCESS,message:e}},error:function(e){return{type:f.ERROR,message:e}},clear:function(){return{type:f.CLEAR}}};var ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).props.getFeaturedPages(),a.props.getAllPages(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log(this.props),i.a.createElement("div",{className:"browse-site"},i.a.createElement("div",{className:"browse-site-title"},"Browse the site"),this.props.featuredSites?i.a.createElement(b,{pages:this.props.featuredSites}):i.a.createElement("span",null,i.a.createElement("div",{className:"loading"}),i.a.createElement("span",null,"Loading Featured Pages...")))}}]),t}(i.a.Component);var te=Object(E.b)(function(e){return e.browseSite.browseSite,console.log(e.browseSite),e.browseSite},function(e){return{getFeaturedPages:function(){e(z.getFeaturedPages())},getAllPages:function(){e(z.getAllPages())}}})(ee),ae=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"homepage"},i.a.createElement("div",{className:"homepage-title"},"Welcome to the page creator on abdelrazaq.com"),i.a.createElement("div",{className:"homepage-links"},i.a.createElement(h.a,{to:"".concat("/sites","/login"),className:"cms-btn"},"Login"),i.a.createElement(h.a,{to:"".concat("/sites","/register"),className:"cms-btn"},"Register")),i.a.createElement(te,null))}}]),t}(i.a.Component),ne=a(1),ie=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).delete=e.delete.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"delete",value:function(){this.props.deleteClicked(this.props.url)}},{key:"render",value:function(e){return i.a.createElement("div",{className:"page"},i.a.createElement(h.a,{className:"page-btn",to:"".concat("/sites","/edit-site/").concat(this.props.url)},this.props.title),i.a.createElement("button",{className:"page-delete",onClick:this.delete},"Delete"))}}]),t}(i.a.Component),re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.data.items)return i.a.createElement("div",{className:"loading"},"Loading...");if(this.props.data.items&&this.props.data.items){for(var e=this.props.data.items,t=[],a=0;a<e.length;a++){var n=e[a];t.push(i.a.createElement(ie,{key:a,id:n.id,author:n.author,url:n.url,title:n.title,style:n.style,deleteClicked:this.props.onDelete}))}return t.length>0?i.a.createElement("div",{className:"pages"},t):i.a.createElement("div",{className:"pages"},'You haven\'t created any pages yet. Click "new page" below to create your first page!')}}}]),t}(i.a.Component),se=a(31),oe=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.message?(console.log(this.props.type),i.a.createElement("div",{className:"alert ".concat(this.props.type)},this.props.message)):null}}]),t}(i.a.Component);var ce=Object(E.b)(function(e){return e.alert})(oe),le=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={pageTitle:"",pageURL:"",invalidURL:!1,isPrivate:!1,submitted:!1},e.handleChange=e.handleChange.bind(Object(ne.a)(Object(ne.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name,i=RegExp(/^([\w-]*)$/);if("pageURL"===n&&!i.test(a))return console.log("unacceptable"),void this.setState({invalidURL:!0});this.setState(Object(se.a)({invalidURL:!1},n,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.pageTitle&&this.state.pageURL){this.setState({submitted:!0});var t=this.state;this.props.onSubmit(t)}}},{key:"render",value:function(){return i.a.createElement("form",{name:"form",className:"new-page-form",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"pageTitle"},"Page Title"),i.a.createElement("input",{type:"text",name:"pageTitle",value:this.state.pageTitle,onChange:this.handleChange})),this.state.submitted&&!this.state.pageTitle&&i.a.createElement("div",{className:"help-block"},"Page title is required"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"pageName"},"Page URL"),i.a.createElement("input",{type:"text",name:"pageURL",value:this.state.pageURL,onChange:this.handleChange})),this.state.submitted&&!this.state.pageURL&&i.a.createElement("div",{className:"help-block"},"Page URL is required"),this.state.invalidURL&&i.a.createElement("div",{className:"help-block"},"Only letters, numbers, dashes and underscores allowed."),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"page-name"},"Make private?"),i.a.createElement("input",{type:"checkbox",name:"isPrivate",checked:this.state.isPrivate,onChange:this.handleChange})),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{className:"submit"},"Create Page"),this.props&&i.a.createElement("div",{className:"loading"})),i.a.createElement(ce,null))}}]),t}(i.a.Component),de=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"delete-page-modal"},i.a.createElement("div",{className:"confirm"},"Are you sure?"),i.a.createElement("div",{className:"delete-page-buttons"},i.a.createElement("button",{className:"submit",onClick:this.props.onDelete},"Yes"),i.a.createElement("button",{className:"submit",onClick:this.props.cancel},"No")))}}]),t}(i.a.Component),ue=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"stopClose",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},{key:"render",value:function(){var e=this;return this.props.show?i.a.createElement("div",{className:"modal-backdrop",onClick:this.props.onClose},i.a.createElement("div",{className:"modal "+this.props.className,onClick:function(t){return e.stopClose(t)}},i.a.createElement("span",{className:"modal-close",onClick:this.props.onClose},"[ x ]"),i.a.createElement("div",{className:"modal-content"},this.props.children))):null}}]),t}(i.a.Component),ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={pageURLToDelete:"",showAddPageModal:e.dashboard.showAddPageModal,showDeletePageModal:e.dashboard.showDeletePageModal,pages:[]},a.getPages=a.getPages.bind(Object(ne.a)(Object(ne.a)(a))),a.addPage=a.addPage.bind(Object(ne.a)(Object(ne.a)(a))),a.deletePage=a.deletePage.bind(Object(ne.a)(Object(ne.a)(a))),a.toggleAddPageModal=a.toggleAddPageModal.bind(Object(ne.a)(Object(ne.a)(a))),a.toggleDeletePageModal=a.toggleDeletePageModal.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getPages()}},{key:"getPages",value:function(){this.props.getPages()}},{key:"addPage",value:function(e){var t={url:e.pageURL,title:e.pageTitle,style:"",private:e.isPrivate};this.props.addPage(t)}},{key:"deletePage",value:function(){this.props.deletePage(this.state.pageURLToDelete)}},{key:"toggleAddPageModal",value:function(){this.props.toggleAddPageModal()}},{key:"toggleDeletePageModal",value:function(e){this.setState({pageURLToDelete:e}),this.props.toggleDeletePageModal()}},{key:"render",value:function(){return i.a.createElement("div",{className:"page dashboard-page"},i.a.createElement("div",{className:"page-header dashboard-header"},i.a.createElement("div",{className:"page-title dashboard-title"},"Your pages")),i.a.createElement(ce,null),i.a.createElement(re,{data:this.props.dashboard,onDelete:this.toggleDeletePageModal}),i.a.createElement("button",{className:"cms-btn add-page",onClick:this.toggleAddPageModal},"New page"),i.a.createElement(ue,{show:this.props.dashboard.showAddPageModal,onClose:this.toggleAddPageModal},i.a.createElement(le,{onSubmit:this.addPage})),i.a.createElement(ue,{show:this.props.dashboard.showDeletePageModal,onClose:this.toggleDeletePageModal},i.a.createElement(de,{onDelete:this.deletePage,cancel:this.toggleDeletePageModal})))}}]),t}(i.a.Component);var pe=Object(E.b)(function(e){return{dashboard:e.dashboard}},function(e){return{getPages:function(){e(H.getPages())},addPage:function(t){e(H.newPage(t))},deletePage:function(t){e(H.deletePage(t))},toggleAddPageModal:function(){e(H.toggleAddPageModal())},toggleDeletePageModal:function(){e(H.toggleDeletePageModal())}}})(ge),me=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={username:"",password:"",validSubmission:!1,submitted:!1},e.handleChange=e.handleChange.bind(Object(ne.a)(Object(ne.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(se.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=this.props.dispatch;if(t.username&&t.password){this.setState({validSubmission:!0});var n={username:t.username,password:t.password};a(q.login(n))}}},{key:"render",value:function(){return i.a.createElement("div",{className:"page login-page"},i.a.createElement("div",{className:"page-title login-title"},"Log in"),i.a.createElement(ce,null),i.a.createElement("form",{name:"form",className:"user-form",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"username"},"Username"),i.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,autocomplete:"off"})),this.state.submitted&&!this.state.username&&i.a.createElement("div",{className:"help-block"},"Username is required"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"password"},"Password"),i.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,autocomplete:"off"})),this.state.submitted&&!this.state.password&&i.a.createElement("div",{className:"help-block"},"Password is required"),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{className:"submit"},"Log in")),this.submitted&&this.state.validSubmission&&i.a.createElement("div",{className:"loading"}),i.a.createElement(h.a,{to:"".concat("/sites","/register"),className:"btn btn-link"},"Don't have an account? Register here")))}}]),t}(i.a.Component);var Ee=Object(E.b)(function(e){return{registering:e.registration.registering}})(me),he=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={username:"",password:"",repeatedPassword:"",email:"",submitted:!1,validSubmission:!1},e.handleSubmit=e.handleSubmit.bind(Object(ne.a)(Object(ne.a)(e))),e.handleChange=e.handleChange.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=this.props.dispatch;if(t.username&&t.password&&t.password===t.repeatedPassword){this.setState({validSubmission:!0});var n={username:t.username,password:t.password,email:t.email};a(q.register(n))}}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(se.a)({},a,n))}},{key:"render",value:function(){var e=this.state.password!==this.state.repeatedPassword;return i.a.createElement("div",{className:"page register-page"},i.a.createElement("div",{className:"register-title"},"Sign up"),i.a.createElement(ce,null),i.a.createElement("form",{name:"form",className:"user-form",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"username"},"Username"),i.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,autocomplete:"off"})),this.state.submitted&&!this.state.username&&i.a.createElement("div",{className:"help-block"},"Username is required"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"username"},"Password"),i.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,className:e?"red-input":""})),this.state.submitted&&!this.state.password&&i.a.createElement("div",{className:"help-block"},"Password is required"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"username"},"Repeat Password"),i.a.createElement("input",{type:"password",name:"repeatedPassword",value:this.state.repeatedPassword,onChange:this.handleChange,className:e?"red-input":""})),this.state.submitted&&!this.state.repeatedPassword&&i.a.createElement("div",{className:"help-block"},"Repeated password is required"),e&&this.state.submitted&&i.a.createElement("div",{className:"help-block"},"Passwords must be the same"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"username"},"Email (not required, but can be used to reset your password)"),i.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange})),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{className:"submit"},"Register"),this.submitted&&this.state.validSubmission&&i.a.createElement("div",{className:"loading"})),i.a.createElement(h.a,{to:"".concat("/sites","/login"),className:"btn btn-link"},"Already have an account? Log in!")))}}]),t}(i.a.Component);var Se=Object(E.b)(function(e){return{registering:e.registration.registering}})(he),be=a(171),fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={backgroundOpen:!1,marginsOpen:!1,paddingsOpen:!1,colorOpen:!1},a.toggleBackgroundOpen=a.toggleBackgroundOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.toggleMarginsOpen=a.toggleMarginsOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.togglePaddingsOpen=a.togglePaddingsOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.toggleColorOpen=a.toggleColorOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.updateMargin=a.updateMargin.bind(Object(ne.a)(Object(ne.a)(a))),a.updatePadding=a.updatePadding.bind(Object(ne.a)(Object(ne.a)(a))),a.updateBackgroundColor=a.updateBackgroundColor.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleBackgroundOpen",value:function(){this.setState({backgroundOpen:!this.state.backgroundOpen})}},{key:"toggleMarginsOpen",value:function(){this.setState({marginsOpen:!this.state.marginsOpen})}},{key:"togglePaddingsOpen",value:function(){this.setState({paddingsOpen:!this.state.paddingsOpen})}},{key:"toggleColorOpen",value:function(){console.log("toggle color"),this.setState({colorOpen:!this.state.colorOpen})}},{key:"updateMargin",value:function(e){this.props.style;var t=this.props.style.margin,a=parseInt(e.target.value);"marginTop"===e.target.name?t=[a,t[1],t[2],t[3]]:"marginRight"===e.target.name?t=[t[0],a,t[2],t[3]]:"marginBottom"===e.target.name?t=[t[0],t[1],a,t[3]]:"marginLeft"===e.target.name?t=[t[0],t[1],t[2],a]:console.log("youre fucked");var n=this.props.style;n.margin=t,this.props.updateBackground(n)}},{key:"updatePadding",value:function(e){this.props.style;for(var t=this.props.style.padding,a=0;a<t.length;a++)null===t[a]?(console.log("dis is nukk"),t[a]=0):console.log(t[a]);var n=parseInt(e.target.value);"paddingTop"===e.target.name?t=[n,t[1],t[2],t[3]]:"paddingRight"===e.target.name?t=[t[0],n,t[2],t[3]]:"paddingBottom"===e.target.name?t=[t[0],t[1],n,t[3]]:"paddingLeft"===e.target.name?t=[t[0],t[1],t[2],n]:console.log("youre fucked");var i=this.props.style;i.padding=t,this.props.updateBackground(i)}},{key:"updateBackgroundColor",value:function(e){var t=this.props.style;t.color=e.hex,this.props.updateBackground(t)}},{key:"postStyle",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"background-editor"},i.a.createElement("div",{className:"background-options-title",onClick:this.toggleBackgroundOpen},"Background",i.a.createElement("div",{className:this.state.backgroundOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.backgroundOpen?"background-editor-controls show":"background-editor-controls close"},i.a.createElement("div",{className:"margins-editor-title background-options-title",onClick:this.toggleMarginsOpen},"Margins",i.a.createElement("div",{className:this.state.marginsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.marginsOpen?"margin-controller-section open":"margin-controller-section close"},i.a.createElement("div",{className:"margin-controller margin-top-controller"},i.a.createElement("label",{htmlFor:"marginTop"},"Top Margin",i.a.createElement("input",{type:"number",name:"marginTop",min:"0",max:"100",value:this.props.style.margin[0],onChange:this.updateMargin}))),i.a.createElement("div",{className:"margin-controller margin-right-controller"},i.a.createElement("label",{htmlFor:"marginRight"},"Right Margin",i.a.createElement("input",{type:"number",name:"marginRight",min:"0",max:"100",value:this.props.style.margin[1],onChange:this.updateMargin}))),i.a.createElement("div",{className:"margin-controller margin-bottom-controller"},i.a.createElement("label",{htmlFor:"marginBottom"},"Bottom Margin",i.a.createElement("input",{type:"number",name:"marginBottom",min:"0",max:"100",value:this.props.style.margin[2],onChange:this.updateMargin}))),i.a.createElement("div",{className:"margin-controller margin-left-controller"},i.a.createElement("label",{htmlFor:"marginLeft"},"Left Margin",i.a.createElement("input",{type:"number",name:"marginLeft",min:"0",max:"100",value:this.props.style.margin[3],onChange:this.updateMargin})))),i.a.createElement("div",{className:"paddings-editor-title background-options-title",onClick:this.togglePaddingsOpen},"Paddings",i.a.createElement("div",{className:this.state.paddingsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.paddingsOpen?"padding-controller-section open":"padding-controller-section close"},i.a.createElement("div",{className:"margin-controller margin-top-controller"},i.a.createElement("label",{htmlFor:"paddingTop"},"Top Padding",i.a.createElement("input",{type:"number",name:"paddingTop",min:"0",max:"100",value:this.props.style.padding[0],onChange:this.updatePadding}))),i.a.createElement("div",{className:"margin-controller margin-right-controller"},i.a.createElement("label",{htmlFor:"paddingRight"},"Right Padding",i.a.createElement("input",{type:"number",name:"paddingRight",min:"0",max:"100",value:this.props.style.padding[1],onChange:this.updatePadding}))),i.a.createElement("div",{className:"margin-controller margin-bottom-controller"},i.a.createElement("label",{htmlFor:"paddingBottom"},"Bottom Padding",i.a.createElement("input",{type:"number",name:"paddingBottom",min:"0",max:"100",value:this.props.style.padding[2],onChange:this.updatePadding}))),i.a.createElement("div",{className:"margin-controller margin-left-controller"},i.a.createElement("label",{htmlFor:"paddingLeft"},"Left Padding",i.a.createElement("input",{type:"number",name:"paddingLeft",min:"0",max:"100",value:this.props.style.padding[3],onChange:this.updatePadding})))),i.a.createElement("div",{className:"color-editor-title background-options-title",onClick:this.toggleColorOpen},"Color",i.a.createElement("div",{className:this.state.colorOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.colorOpen?"color-controller-section open":"color-controller-section close"},i.a.createElement(be.CompactPicker,{color:this.props.style.color,onChangeComplete:this.updateBackgroundColor}))))}}]),t}(i.a.Component),Oe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={deleteModalOpen:!1},e.toggleDeleteModal=e.toggleDeleteModal.bind(Object(ne.a)(Object(ne.a)(e))),e.deleteSection=e.deleteSection.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleDeleteModal",value:function(){this.setState({deleteModalOpen:!this.state.deleteModalOpen})}},{key:"deleteSection",value:function(){var e=this.props.deleteSection(this.props.index);console.log(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"delete-section",onClick:this.toggleDeleteModal},"Delete Section",i.a.createElement(ue,{show:this.state.deleteModalOpen,onClose:this.toggleDeleteModal},i.a.createElement("button",{className:"cms-btn",onClick:this.deleteSection},"Delete Section")))}}]),t}(i.a.Component),ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={editSectionOpen:!1,marginsOpen:!1,paddingsOpen:!1},a.toggleEditSectionOpen=a.toggleEditSectionOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.toggleMarginsOpen=a.toggleMarginsOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.togglePaddingsOpen=a.togglePaddingsOpen.bind(Object(ne.a)(Object(ne.a)(a))),a.updateMargin=a.updateMargin.bind(Object(ne.a)(Object(ne.a)(a))),a.updatePadding=a.updatePadding.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleEditSectionOpen",value:function(){this.setState({editSectionOpen:!this.state.editSectionOpen})}},{key:"toggleMarginsOpen",value:function(){this.setState({marginsOpen:!this.state.marginsOpen})}},{key:"togglePaddingsOpen",value:function(){this.setState({paddingsOpen:!this.state.paddingsOpen})}},{key:"updateMargin",value:function(e){var t=this.props.sectionData.text[0].margin,a=parseInt(e.target.value);"marginTop"===e.target.name?t=[a,t[1],t[2],t[3]]:"marginRight"===e.target.name?t=[t[0],a,t[2],t[3]]:"marginBottom"===e.target.name?t=[t[0],t[1],a,t[3]]:"marginLeft"===e.target.name?t=[t[0],t[1],t[2],a]:console.log("youre fucked");var n=this.props.sectionData;n.text[0].margin=t,console.log(n),this.props.updateTextSection(this.props.index,n)}},{key:"updatePadding",value:function(e){}},{key:"render",value:function(){var e=this.props.sectionData.text[0].margin,t=this.props.sectionData.text[0].padding;return i.a.createElement("div",{className:"edit-tab-section"},i.a.createElement("div",{className:"edit-tab-section-title",onClick:this.toggleEditSectionOpen},"Type Section: ",this.props.sectionData.sectionType,i.a.createElement("div",{className:this.state.editSectionOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.editSectionOpen?"edit-tab-section-controls show":"edit-tab-section-controls close"},i.a.createElement("div",{className:"margins-editor-title background-options-title",onClick:this.toggleMarginsOpen},"Margins",i.a.createElement("div",{className:this.state.marginsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.marginsOpen?"margin-controller-section open":"margin-controller-section close"},i.a.createElement("div",{className:"margin-controller margin-top-controller"},i.a.createElement("label",{htmlFor:"marginTop"},"Top Margin",i.a.createElement("input",{type:"number",name:"marginTop",min:"0",max:"100",value:e[0],onChange:this.updateMargin}))),i.a.createElement("div",{className:"margin-controller margin-right-controller"},i.a.createElement("label",{htmlFor:"marginRight"},"Right Margin",i.a.createElement("input",{type:"number",name:"marginRight",min:"0",max:"100",value:e[1],onChange:this.updateMargin}))),i.a.createElement("div",{className:"margin-controller margin-bottom-controller"},i.a.createElement("label",{htmlFor:"marginBottom"},"Bottom Margin",i.a.createElement("input",{type:"number",name:"marginBottom",min:"0",max:"100",value:e[2],onChange:this.updateMargin}))),i.a.createElement("div",{className:"margin-controller margin-left-controller"},i.a.createElement("label",{htmlFor:"marginLeft"},"Left Margin",i.a.createElement("input",{type:"number",name:"marginLeft",min:"0",max:"100",value:e[3],onChange:this.updateMargin})))),i.a.createElement("div",{className:"paddings-editor-title background-options-title",onClick:this.togglePaddingsOpen},"Paddings",i.a.createElement("div",{className:this.state.paddingsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.paddingsOpen?"padding-controller-section open":"padding-controller-section close"},i.a.createElement("div",{className:"margin-controller margin-top-controller"},i.a.createElement("label",{htmlFor:"paddingTop"},"Top Padding",i.a.createElement("input",{type:"number",name:"paddingTop",min:"0",max:"100",value:t[0],onChange:this.updatePadding}))),i.a.createElement("div",{className:"margin-controller margin-right-controller"},i.a.createElement("label",{htmlFor:"paddingRight"},"Right Padding",i.a.createElement("input",{type:"number",name:"paddingRight",min:"0",max:"100",value:t[1],onChange:this.updatePadding}))),i.a.createElement("div",{className:"margin-controller margin-bottom-controller"},i.a.createElement("label",{htmlFor:"paddingBottom"},"Bottom Padding",i.a.createElement("input",{type:"number",name:"paddingBottom",min:"0",max:"100",value:t[2],onChange:this.updatePadding}))),i.a.createElement("div",{className:"margin-controller margin-left-controller"},i.a.createElement("label",{htmlFor:"paddingLeft"},"Left Padding",i.a.createElement("input",{type:"number",name:"paddingLeft",min:"0",max:"100",value:t[3],onChange:this.updatePadding})))),i.a.createElement(Oe,{deleteSection:this.props.deleteSection,index:this.props.index})))}}]),t}(i.a.Component),Te=a(68),ye=a(35),Ce=a(69),je=(a(167),{inlineStyleFn:function(e){e.filter(function(e){return console.log(e)});var t=e.filter(function(e){return e.startsWith("color-")}).first(),a=e.filter(function(e){return e.startsWith("fontsize-")}).first(),n={element:"span",style:{}};return t&&(n.style.color=t.replace("color-","")),a&&(n.style.fontSize=a.replace("fontsize-","")),n}}),Ae=function(e){function t(){var e;Object(o.a)(this,t),e=Object(l.a)(this,Object(d.a)(t).call(this));var a=ye.EditorState.createEmpty();return e.state={editorState:a},e.onEditorStateChange=e.onEditorStateChange.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onEditorStateChange",value:function(e){this.setState({editorState:e});var t=this.state.editorState.getCurrentContent(),a=Object(Ce.stateToHTML)(t,je);this.props.updateText(a)}},{key:"render",value:function(){return i.a.createElement("div",{className:"add-section-text-editor"},i.a.createElement(Te.Editor,{ref:this.setEditor,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange,blockRendererFn:this.myBlockRenderer,blockStyleFn:this.myBlockStyleFunction,toolbar:{options:["inline","blockType","fontSize","fontFamily","colorPicker","link","history"],fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana","Wingdings","SNFS"]}}}))}}]),t}(i.a.Component),Le=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={imageSelected:!1,image:[]},e.imageSelected=e.imageSelected.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"imageSelected",value:function(e){e.preventDefault();var t=this.refs.imageRef.files[0],a=new FileReader;a.readAsDataURL(t);a.onloadend=function(e){this.setState({imgSrc:[a.result]}),this.props.updateImage(t)}.bind(this)}},{key:"render",value:function(){return i.a.createElement("div",{className:"add-section-image-adder"},i.a.createElement("input",{className:"cms-btn",name:"image",type:"file",accept:"image/png, image/jpg, image/jpeg image/gif",onChange:this.imageSelected,ref:"imageRef",required:!0}),i.a.createElement("div",{className:"image-preview"},i.a.createElement("img",{src:this.state.imgSrc})))}}]),t}(i.a.Component);var Ne=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={showModal:!1,sectionToAdd:"text",contentToAdd:"",imageToAdd:null},e.toggleModal=e.toggleModal.bind(Object(ne.a)(Object(ne.a)(e))),e.handleChange=e.handleChange.bind(Object(ne.a)(Object(ne.a)(e))),e.addSection=e.addSection.bind(Object(ne.a)(Object(ne.a)(e))),e.updateText=e.updateText.bind(Object(ne.a)(Object(ne.a)(e))),e.updateImageToAdd=e.updateImageToAdd.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"handleChange",value:function(e){this.setState({sectionToAdd:e.target.value})}},{key:"addSection",value:function(e){if(e.preventDefault(),"text"===this.state.sectionToAdd)this.props.addSection(this.state.sectionToAdd,this.state.contentToAdd);else if("image"===this.state.sectionToAdd){var t=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<15;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();this.props.addImageSection(t,this.state.imageToAdd)}this.toggleModal()}},{key:"updateText",value:function(e){this.setState({contentToAdd:e})}},{key:"updateImageToAdd",value:function(e){console.log(e),this.setState({imageToAdd:e})}},{key:"render",value:function(){return i.a.createElement("div",{className:"add-section-wrapper"},i.a.createElement("button",{className:"cms-btn",onClick:this.toggleModal},"Add Section"),i.a.createElement(ue,{show:this.state.showModal,className:"add-section-modal",onClose:this.toggleModal},i.a.createElement("div",{className:"add-section-modal-title"},"Add Section"),i.a.createElement("form",{className:"add-section-options",onSubmit:this.addSection},i.a.createElement("label",{htmlFor:"section-type-select"},"Choose a section type"),i.a.createElement("select",{className:"section-type-select",onChange:this.handleChange},i.a.createElement("option",{value:"text"},"Text"),i.a.createElement("option",{value:"image"},"Image")),"text"===this.state.sectionToAdd?i.a.createElement("div",{className:"text-editor-wrapper"},i.a.createElement(Ae,{updateText:this.updateText})):i.a.createElement("div",{className:"image-adder-wrapper"},i.a.createElement(Le,{updateImage:this.updateImageToAdd})),i.a.createElement("input",{className:"cms-btn",type:"submit",value:"Submit"}))))}}]),t}(i.a.Component),Re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={pageSectionsOpen:!1},a.togglePageSectionsOpen=a.togglePageSectionsOpen.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"togglePageSectionsOpen",value:function(){this.setState({pageSectionsOpen:!this.state.pageSectionsOpen})}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.sections.length;t++)e.push(i.a.createElement(ve,{sectionData:this.props.sections[t],deleteSection:this.props.deleteSection,updateTextSection:this.props.updateTextSection,index:t,key:t}));return i.a.createElement("div",{className:"edit-sections-wrapper"},i.a.createElement("div",{className:"edit-sections-title",onClick:this.togglePageSectionsOpen},"Page Sections",i.a.createElement("div",{className:this.state.pageSectionsOpen?"editor-toggle-triangle open":"editor-toggle-triangle close"})),i.a.createElement("div",{className:this.state.pageSectionsOpen?"edit-sections open":"edit-sections close"},e,i.a.createElement(Ne,{addSection:this.props.addSection,addImageSection:this.props.addImageSection})))}}]),t}(i.a.Component),ke=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={show:!1},e.toggleShow=e.toggleShow.bind(Object(ne.a)(Object(ne.a)(e))),e.updateStyle=e.updateStyle.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleShow",value:function(){this.setState({show:!this.state.show})}},{key:"updateStyle",value:function(){this.props.updateStyle()}},{key:"render",value:function(){return i.a.createElement("div",{className:"edit-tab "+(this.state.show?"show":"hide")},i.a.createElement("div",{className:"edit-tab-header"},i.a.createElement("button",{className:"cms-btn",onClick:this.toggleShow},"Hide edit tab")),i.a.createElement("div",{className:"edit-tab-controls"},i.a.createElement(fe,{style:this.props.style.background,updateBackground:this.props.updateBackground,postBackground:this.props.postBackground}),i.a.createElement(Re,{sections:this.props.style.sections,addSection:this.props.addSection,addImageSection:this.props.addImageSection,deleteSection:this.props.deleteSection,updateTextSection:this.props.updateTextSection})),i.a.createElement("div",{className:"show-btn",onClick:this.toggleShow},"Show edit tab"),i.a.createElement("button",{className:"cms-btn",onClick:this.updateStyle},"Update Page"))}}]),t}(i.a.Component);var Ue=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.data,a={marginTop:this.props.data.margin[0],marginRight:this.props.data.margin[1],marginBottom:this.props.data.margin[2],marginLeft:this.props.data.margin[3],paddingTop:this.props.data.padding[0],paddingRight:this.props.data.padding[1],paddingBottom:this.props.data.padding[2],paddingLeft:this.props.data.padding[3]};return i.a.createElement("span",{style:a,dangerouslySetInnerHTML:(e=t.html,{__html:e})})}}]),t}(i.a.Component),Ie=(i.a.Component,function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.textSubsections[0].props.data,t={marginTop:e.margin[0],marginRight:e.margin[1],marginBottom:e.margin[2],marginLeft:e.margin[3],paddingTop:e.padding[0],paddingRight:e.padding[1],paddingBottom:e.padding[2],paddingLeft:e.padding[3]},a=[],n=0;n<this.props.textSubsections.length;n++){var r=this.props.textSubsections[n].props.data;a.push(i.a.createElement(Ue,{key:n,data:r}))}return i.a.createElement("div",{style:t},a)}}]),t}(i.a.Component)),we=a(172),_e=a.n(we);var Pe={inlineStyleFn:function(e){e.filter(function(e){return console.log(e)});var t=e.filter(function(e){return e.startsWith("color-")}).first(),a=e.filter(function(e){return e.startsWith("fontsize-")}).first(),n=e.filter(function(e){return e.startsWith("fontfamily-")}).first(),i=e.filter(function(e){return e.startsWith("textalign-")}).first(),r={element:"span",style:{}};return t&&(r.style.color=t.replace("color-","")),a&&(r.style.fontSize=a.replace("fontsize-","")),n&&(r.style.fontFamily=n.replace("fontfamily-","")),i&&(r.style.textAlignment=i.replace("textalign-","")),r}},Ge=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));for(var n="",i=0;i<e.textSubsections.length;i++)n+=e.textSubsections[i].props.data.html;var r=_e()(n),s=ye.ContentState.createFromBlockArray(r),c=ye.EditorState.createWithContent(s);return a.state={editorState:c},a.state={editorState:a.state.editorState},a.onChange=function(e){return a.setState({editorState:e})},a.setEditor=function(e){a.editor=e},a.updateText=a.updateText.bind(Object(ne.a)(Object(ne.a)(a))),a.onEditorStateChange=a.onEditorStateChange.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateText",value:function(){var e=this.props.pageSectionIndex,t=this.state.editorState.getCurrentContent(),a=Object(Ce.stateToHTML)(t,Pe);console.log(e),console.log(a),this.props.updateText(e,a),this.props.updateView()}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e})}},{key:"render",value:function(){return i.a.createElement("div",{className:"edit-page-section"},i.a.createElement(Te.Editor,{ref:this.setEditor,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange,blockRendererFn:this.myBlockRenderer,blockStyleFn:this.myBlockStyleFunction,toolbar:{options:["inline","blockType","fontSize","fontFamily","colorPicker","link","history"],fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana","Wingdings","SNFS"]}}}),i.a.createElement("div",{className:"update-btn cms-btn",onClick:this.updateText},"Update"))}}]),t}(i.a.Component),De=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));for(var n=e.textSubsections[0].props.data.html,i=n.match(/'([^']+)'/)[1],r=n.match(/\(.*?\)/g),s=[],c=0;c<r.length;c++){var u=r[c];s.push(u.substring(1,u.length-1))}for(var g=[],p=0;p<s.length;p++){var m=s[p].split(", ");g.push(m)}for(var E=g.flat(),h=0;h<E.length;h++)E[h]=E[h].replace("deg","");return a.state={skewX:E[0],skewY:E[1],rotate:E[2],scaleX:E[3],scaleY:E[4],imageSrc:i},a.handleChange=a.handleChange.bind(Object(ne.a)(Object(ne.a)(a))),a.updateStyle=a.updateStyle.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(se.a)({},e.target.name,e.target.value))}},{key:"updateStyle",value:function(){var e="skew("+this.state.skewX+"deg, "+this.state.skewY+"deg) "+("rotate("+this.state.rotate+"deg) ")+("scale("+this.state.scaleX+", "+this.state.scaleY+") "),t="<img src='"+this.state.imageSrc+"' style='transform: "+e+";' />";console.log(t),this.props.updateText(this.props.pageSectionIndex,t),this.props.updateView()}},{key:"render",value:function(){var e={transform:"skew("+this.state.skewX+"deg, "+this.state.skewY+"deg) "+("rotate("+this.state.rotate+"deg) ")+("scale("+this.state.scaleX+", "+this.state.scaleY+") ")};return i.a.createElement("div",{className:"edit-page-image-section"},i.a.createElement("div",{className:"image"},i.a.createElement("img",{src:this.state.imageSrc,style:e})),i.a.createElement("div",{className:"controls"},i.a.createElement("div",{className:"skew-x"},"X Skew",i.a.createElement("input",{type:"range",id:"skewX",name:"skewX",min:"-360",max:"360",value:this.state.skewX,onChange:this.handleChange})),i.a.createElement("div",{className:"skew-y"},"Y Skew",i.a.createElement("input",{type:"range",id:"skewY",name:"skewY",min:"-360",max:"360",value:this.state.skewY,onChange:this.handleChange})),i.a.createElement("div",{className:"rotate"},"Rotate",i.a.createElement("input",{type:"range",id:"rotate",name:"rotate",min:"-360",max:"360",value:this.state.rotate,onChange:this.handleChange})),i.a.createElement("div",{className:"scaleX"},"Scale X",i.a.createElement("input",{type:"range",id:"scaleX",name:"scaleX",min:"0",max:"5",step:"0.05",value:this.state.scaleX,onChange:this.handleChange})),i.a.createElement("div",{className:"scaleY"},"Scale Y",i.a.createElement("input",{type:"range",id:"scaleY",name:"scaleY",min:"0",max:"5",step:"0.05",value:this.state.scaleY,onChange:this.handleChange})),i.a.createElement("button",{className:"cms-btn edit-image-section-submit",onClick:this.updateStyle},"Update")))}}]),t}(i.a.Component),xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={viewMode:!0,editMode:!1,showEditButton:!1,view:e.view},a.toggleEditButton=a.toggleEditButton.bind(Object(ne.a)(Object(ne.a)(a))),a.enterViewMode=a.enterViewMode.bind(Object(ne.a)(Object(ne.a)(a))),a.enterEditMode=a.enterEditMode.bind(Object(ne.a)(Object(ne.a)(a))),a.updateText=a.updateText.bind(Object(ne.a)(Object(ne.a)(a))),a.updateViewToEdit=a.updateViewToEdit.bind(Object(ne.a)(Object(ne.a)(a))),a.updateViewToView=a.updateViewToView.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleEditButton",value:function(){this.setState({showEditButton:!this.state.showEditButton})}},{key:"enterViewMode",value:function(){this.setState({viewMode:!0,editMode:!1})}},{key:"enterEditMode",value:function(){this.setState({viewMode:!1,editMode:!0})}},{key:"updateText",value:function(e,t){this.props.updateText(this.props.pageSectionIndex,t)}},{key:"updateViewToEdit",value:function(){console.log(this.props.style.sectionType),this.props.updateView("edit",this.props.pageSectionIndex)}},{key:"updateViewToView",value:function(){this.props.updateView("view",this.props.pageSectionIndex)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.style.text.length;t++)e.push(i.a.createElement(Ue,{key:t,data:this.props.style.text[t]}));var a={display:this.state.showEditButton?"block":"none"},n=this.props.pageSectionIndex,r=(this.props.viewArr[n],"view"===this.props.viewArr[n]),s="image"===this.props.style.sectionType;return i.a.createElement("div",{className:"section section-"+this.props.style.sectionType,onMouseEnter:this.toggleEditButton,onMouseLeave:this.toggleEditButton},i.a.createElement("div",{className:"edit-btn",style:a,onClick:this.updateViewToEdit},"Edit"),r?i.a.createElement(Ie,{pageSectionIndex:this.props.pageSectionIndex,textSubsections:e,updateViewTo:this.props.updateView}):s?i.a.createElement(De,{pageSectionIndex:this.props.pageSectionIndex,textSubsections:e,updateText:this.updateText,updateView:this.updateViewToView}):i.a.createElement(Ge,{pageSectionIndex:this.props.pageSectionIndex,textSubsections:e,updateText:this.updateText,updateView:this.updateViewToView}))}}]),t}(i.a.Component),Me=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={style:null},e.renderStyle=e.renderStyle.bind(Object(ne.a)(Object(ne.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderStyle",value:function(){}},{key:"render",value:function(){if(this.props.style){this.renderStyle();for(var e=[],t=0;t<this.props.style.sections.length;t++)e.push(i.a.createElement(xe,{key:t,style:this.props.style.sections[t],pageSectionIndex:t,updateText:this.props.updateTextSection,viewArr:this.props.viewArr,updateView:this.props.updateView}));var a={backgroundColor:this.props.style.background.color,marginTop:this.props.style.background.margin[0],marginRight:this.props.style.background.margin[1],marginBottom:this.props.style.background.margin[2],marginLeft:this.props.style.background.margin[3],paddingTop:this.props.style.background.padding[0],paddingRight:this.props.style.background.padding[1],paddingBottom:this.props.style.background.padding[2],paddingLeft:this.props.style.background.padding[3]};return i.a.createElement("div",{className:"edit-page-root",style:a},e)}return i.a.createElement("div",{className:"loading"})}}]),t}(i.a.Component),Fe=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));var n=e.match.params.siteURL;return a.state={siteURL:n},document.title=n,a.props.getStyle(n),a.addSection=a.addSection.bind(Object(ne.a)(Object(ne.a)(a))),a.addImageSection=a.addImageSection.bind(Object(ne.a)(Object(ne.a)(a))),a.deleteSection=a.deleteSection.bind(Object(ne.a)(Object(ne.a)(a))),a.updateTextSection=a.updateTextSection.bind(Object(ne.a)(Object(ne.a)(a))),a.updateTextSectionJSON=a.updateTextSectionJSON.bind(Object(ne.a)(Object(ne.a)(a))),a.updateSiteBackground=a.updateSiteBackground.bind(Object(ne.a)(Object(ne.a)(a))),a.updateStyle=a.updateStyle.bind(Object(ne.a)(Object(ne.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"addSection",value:function(e,t){var a=JSON.parse(this.props.editSite.style.results.getStyle),n={sectionType:e,text:[{margin:[0,0,0,0],padding:[0,0,0,0],html:t.replace(/"/g,"'")}]};a.sections.push(n),this.props.addSection(this.state.siteURL,a)}},{key:"addImageSection",value:function(e,t,a){console.log(a);var n=JSON.parse(this.props.editSite.style.results.getStyle),i={sectionType:"image",text:[{margin:[0,0,0,0],padding:[0,0,0,0],html:"<img src='/cms-api/get-image/"+this.state.siteURL+"/"+e+"' + style='transform: skew(0deg, 0deg) rotate(0deg) scale(1, 1) ;' />"}]};n.sections.push(i),console.log(n),this.props.addImageSection(this.state.siteURL,e,t,n)}},{key:"deleteSection",value:function(e){var t=JSON.parse(this.props.editSite.style.results.getStyle),a=t.sections;a.splice(e,1),t.sections=a,this.props.editSection(this.state.siteURL,t)}},{key:"updateSiteBackground",value:function(e){var t=this.props.editSite.style.results.getStyle,a=JSON.parse(t);a.background=e;var n=JSON.stringify(a),i=this.props.editSite.style;i.results.getStyle=n,this.props.updateSiteBackground(i)}},{key:"updateTextSection",value:function(e,t){var a=JSON.parse(this.props.editSite.style.results.getStyle),n=t.replace(/"/g,"'");a.sections[e].text[0].html=n,this.props.editSection(this.state.siteURL,a)}},{key:"updateStyle",value:function(){var e=this.props.editSite.style.results.getStyle;this.props.editSection(this.state.siteURL,JSON.parse(e))}},{key:"updateTextSectionJSON",value:function(e,t){var a=JSON.parse(this.props.editSite.style.results.getStyle);a.sections[e]=t,this.props.editSection(this.state.siteURL,a)}},{key:"render",value:function(){if(this.props.editSite.style){var e=JSON.parse(this.props.editSite.style.results.getStyle);return i.a.createElement("div",{className:"edit-site"},i.a.createElement(ke,{style:e,addSection:this.addSection,addImageSection:this.addImageSection,deleteSection:this.deleteSection,updateBackground:this.updateSiteBackground,postBackground:this.props.postSiteBackground,updateTextSection:this.updateTextSectionJSON,updateStyle:this.updateStyle}),i.a.createElement(Me,{style:e,updateTextSection:this.updateTextSection,viewArr:this.props.editSite.viewArr,updateView:this.props.updateView}))}return i.a.createElement("div",{className:"edit-site"},i.a.createElement("div",{className:"loading"}))}}]),t}(i.a.Component);var Be=Object(E.b)(function(e){return{editSite:e.editSite,viewArr:e.viewArr}},function(e){return{addSection:function(t,a){e(K.addSection(t,a))},addImageSection:function(t,a,n,i){e(K.addImageSection(t,a,n,i))},deleteSection:function(t,a){e(K.deleteSection(t,a))},editSection:function(t,a,n){e(K.editSection(t,a,n))},getStyle:function(t){e(K.getStyle(t))},updateSiteBackground:function(t){e(K.updateSiteBackground(t))},postSiteBackground:function(){e(K.postSiteBackground())},updateSectionBackground:function(t){e(K.updateSectionBackground(t))},updateView:function(t,a){e(K.updateView(t,a))}}})(Fe),Qe=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.style){console.log(this.props.style.sections);for(var e=[],t=0;t<this.props.style.sections.length;t++)e.push(i.a.createElement(xe,{key:t,style:this.props.style.sections[t],pageSectionIndex:t,viewArr:this.props.viewArr}));var a={backgroundColor:this.props.style.background.color,marginTop:this.props.style.background.margin[0],marginRight:this.props.style.background.margin[1],marginBottom:this.props.style.background.margin[2],marginLeft:this.props.style.background.margin[3],paddingTop:this.props.style.background.padding[0],paddingRight:this.props.style.background.padding[1],paddingBottom:this.props.style.background.padding[2],paddingLeft:this.props.style.background.padding[3]};return i.a.createElement("div",{className:"view-page-root",style:a},e)}}}]),t}(i.a.Component),Ve=a(173),Ye=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(d.a)(t).call(this,e));var n=e.match.params.siteURL;return a.state={siteURL:n},document.title=n,console.log(a.props),a.props.getStyle(n),a.props.getTitle(n),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.editSite.style){console.log(this.props.editSite);var e=JSON.parse(this.props.editSite.style.results.getStyle),t=(this.props.editSite.style.results.getStyle,"");return this.props.editSite.title&&(t=this.props.editSite.title.results.getTitle),console.log(t),i.a.createElement("div",{className:"view-site"},i.a.createElement(Ve.Helmet,null,i.a.createElement("meta",{property:"og:title",content:this.state.siteURL}),i.a.createElement("meta",{property:"og:type",content:"website"}),i.a.createElement("meta",{property:"og:image",content:"".concat("/sites","/cms-api/get-social-image/").concat(this.state.siteURL)}),i.a.createElement("meta",{property:"og:url",content:"".concat("/sites","/p/").concat(this.state.siteURL)}),i.a.createElement("meta",{property:"og:site_name",content:t}),i.a.createElement("meta",{name:"twitter:card",value:"look at this cool site"}),i.a.createElement("meta",{name:"twitter:site",content:"@aaddllaaii"}),i.a.createElement("meta",{name:"twitter:creator",content:"@aaddllaaii"}),i.a.createElement("meta",{name:"twitter:title",content:this.state.siteURL}),i.a.createElement("meta",{name:"twitter:image",content:"".concat("/sites","/cms-api/get-social-image/").concat(this.state.siteURL)}),i.a.createElement("title",null,t)),i.a.createElement(Qe,{style:e,viewArr:this.props.editSite.viewArr}))}return i.a.createElement("div",{className:"loading"})}}]),t}(i.a.Component);var Je=Object(E.b)(function(e){return{editSite:e.editSite}},function(e){return{getStyle:function(t){e(K.getStyle(t))},getTitle:function(t){e(K.getTitle(t))}}})(Ye),We=function(e){function t(e){var a;Object(o.a)(this,t);var n=(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).props.dispatch;return j.listen(function(e,t){n(Z.clear())}),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("/sites"),console.log("".concat("/sites","/login")),i.a.createElement(g.a,{basename:"/sites",history:j},i.a.createElement(p.a,null,i.a.createElement(m.a,{exact:!0,path:"".concat("/sites","/"),component:ae}),i.a.createElement(m.a,{path:"".concat("/sites","/dashboard"),render:function(e){return i.a.createElement(pe,null)}}),i.a.createElement(m.a,{path:"".concat("/sites","/login"),component:Ee}),i.a.createElement(m.a,{path:"".concat("/sites","/register"),component:Se}),i.a.createElement(m.a,{path:"".concat("/sites","/edit-site/:siteURL"),component:Be}),i.a.createElement(m.a,{path:"".concat("/sites","/p/:siteURL"),component:Je})))}}]),t}(i.a.Component);var Xe=Object(E.b)(function(e){return{alert:e.alert}})(We);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(E.a,{store:G},i.a.createElement(function(){return i.a.createElement(Xe,null)},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[176,2,1]]]);
//# sourceMappingURL=main.68d1829e.chunk.js.map